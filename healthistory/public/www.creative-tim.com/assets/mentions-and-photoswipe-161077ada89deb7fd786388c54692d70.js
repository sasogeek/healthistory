!function(e,t){function n(t,n){var o,r,a,s=t.nodeName.toLowerCase();return"area"===s?(o=t.parentNode,r=o.name,!(!t.href||!r||"map"!==o.nodeName.toLowerCase())&&(a=e("img[usemap=#"+r+"]")[0],!!a&&i(a))):(/input|select|textarea|button|object/.test(s)?!t.disabled:"a"===s?t.href||n:n)&&i(t)}function i(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}var o=0,r=/^ui-id-\d+$/;e.ui=e.ui||{},e.extend(e.ui,{version:"1.10.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({focus:function(t){return function(n,i){return"number"==typeof n?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),i&&i.call(t)},n)}):t.apply(this,arguments)}}(e.fn.focus),scrollParent:function(){var t;return t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(n){if(n!==t)return this.css("zIndex",n);if(this.length)for(var i,o,r=e(this[0]);r.length&&r[0]!==document;){if(i=r.css("position"),("absolute"===i||"relative"===i||"fixed"===i)&&(o=parseInt(r.css("zIndex"),10),!isNaN(o)&&0!==o))return o;r=r.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++o)})},removeUniqueId:function(){return this.each(function(){r.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,i){return!!e.data(t,i[3])},focusable:function(t){return n(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var i=e.attr(t,"tabindex"),o=isNaN(i);return(o||i>=0)&&n(t,!o)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(n,i){function o(t,n,i,o){return e.each(r,function(){n-=parseFloat(e.css(t,"padding"+this))||0,i&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),o&&(n-=parseFloat(e.css(t,"margin"+this))||0)}),n}var r="Width"===i?["Left","Right"]:["Top","Bottom"],a=i.toLowerCase(),s={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+i]=function(n){return n===t?s["inner"+i].call(this):this.each(function(){e(this).css(a,o(this,n)+"px")})},e.fn["outer"+i]=function(t,n){return"number"!=typeof t?s["outer"+i].call(this,t):this.each(function(){e(this).css(a,o(this,t,!0,n)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(n){return arguments.length?t.call(this,e.camelCase(n)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.support.selectstart="onselectstart"in document.createElement("div"),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,n,i){var o,r=e.ui[t].prototype;for(o in i)r.plugins[o]=r.plugins[o]||[],r.plugins[o].push([n,i[o]])},call:function(e,t,n){var i,o=e.plugins[t];if(o&&e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType)for(i=0;i<o.length;i++)e.options[o[i][0]]&&o[i][1].apply(e.element,n)}},hasScroll:function(t,n){if("hidden"===e(t).css("overflow"))return!1;var i=n&&"left"===n?"scrollLeft":"scrollTop",o=!1;return t[i]>0||(t[i]=1,o=t[i]>0,t[i]=0,o)}})}(jQuery),function(e,t){var n=0,i=Array.prototype.slice,o=e.cleanData;e.cleanData=function(t){for(var n,i=0;null!=(n=t[i]);i++)try{e(n).triggerHandler("remove")}catch(e){}o(t)},e.widget=function(t,n,i){var o,r,a,s,l={},u=t.split(".")[0];t=t.split(".")[1],o=u+"-"+t,i||(i=n,n=e.Widget),e.expr[":"][o.toLowerCase()]=function(t){return!!e.data(t,o)},e[u]=e[u]||{},r=e[u][t],a=e[u][t]=function(e,t){return this._createWidget?void(arguments.length&&this._createWidget(e,t)):new a(e,t)},e.extend(a,r,{version:i.version,_proto:e.extend({},i),_childConstructors:[]}),s=new n,s.options=e.widget.extend({},s.options),e.each(i,function(t,i){return e.isFunction(i)?void(l[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},o=function(e){return n.prototype[t].apply(this,e)};return function(){var t,n=this._super,r=this._superApply;return this._super=e,this._superApply=o,t=i.apply(this,arguments),this._super=n,this._superApply=r,t}}()):void(l[t]=i)}),a.prototype=e.widget.extend(s,{widgetEventPrefix:r?s.widgetEventPrefix||t:t},l,{constructor:a,namespace:u,widgetName:t,widgetFullName:o}),r?(e.each(r._childConstructors,function(t,n){var i=n.prototype;e.widget(i.namespace+"."+i.widgetName,a,n._proto)}),delete r._childConstructors):n._childConstructors.push(a),e.widget.bridge(t,a)},e.widget.extend=function(n){for(var o,r,a=i.call(arguments,1),s=0,l=a.length;s<l;s++)for(o in a[s])r=a[s][o],a[s].hasOwnProperty(o)&&r!==t&&(e.isPlainObject(r)?n[o]=e.isPlainObject(n[o])?e.widget.extend({},n[o],r):e.widget.extend({},r):n[o]=r);return n},e.widget.bridge=function(n,o){var r=o.prototype.widgetFullName||n;e.fn[n]=function(a){var s="string"==typeof a,l=i.call(arguments,1),u=this;return a=!s&&l.length?e.widget.extend.apply(null,[a].concat(l)):a,s?this.each(function(){var i,o=e.data(this,r);return o?e.isFunction(o[a])&&"_"!==a.charAt(0)?(i=o[a].apply(o,l),i!==o&&i!==t?(u=i&&i.jquery?u.pushStack(i.get()):i,!1):void 0):e.error("no such method '"+a+"' for "+n+" widget instance"):e.error("cannot call methods on "+n+" prior to initialization; attempted to call method '"+a+"'")}):this.each(function(){var t=e.data(this,r);t?t.option(a||{})._init():e.data(this,r,new o(a,this))}),u}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,i){i=e(i||this.defaultElement||this)[0],this.element=e(i),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),i!==this&&(e.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===i&&this.destroy()}}),this.document=e(i.style?i.ownerDocument:i.document||i),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(n,i){var o,r,a,s=n;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof n)if(s={},o=n.split("."),n=o.shift(),o.length){for(r=s[n]=e.widget.extend({},this.options[n]),a=0;a<o.length-1;a++)r[o[a]]=r[o[a]]||{},r=r[o[a]];if(n=o.pop(),1===arguments.length)return r[n]===t?null:r[n];r[n]=i}else{if(1===arguments.length)return this.options[n]===t?null:this.options[n];s[n]=i}return this._setOptions(s),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,n,i){var o,r=this;"boolean"!=typeof t&&(i=n,n=t,t=!1),i?(n=o=e(n),this.bindings=this.bindings.add(n)):(i=n,n=this.element,o=this.widget()),e.each(i,function(i,a){function s(){if(t||r.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled"))return("string"==typeof a?r[a]:a).apply(r,arguments)}"string"!=typeof a&&(s.guid=a.guid=a.guid||s.guid||e.guid++);var l=i.match(/^(\w+)\s*(.*)$/),u=l[1]+r.eventNamespace,c=l[2];c?o.delegate(c,u,s):n.bind(u,s)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function n(){return("string"==typeof e?i[e]:e).apply(i,arguments)}var i=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,i){var o,r,a=this.options[t];if(i=i||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],r=n.originalEvent)for(o in r)o in n||(n[o]=r[o]);return this.element.trigger(n,i),!(e.isFunction(a)&&a.apply(this.element[0],[n].concat(i))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(i,o,r){"string"==typeof o&&(o={effect:o});var a,s=o?o===!0||"number"==typeof o?n:o.effect||n:t;o=o||{},"number"==typeof o&&(o={duration:o}),a=!e.isEmptyObject(o),o.complete=r,o.delay&&i.delay(o.delay),a&&e.effects&&e.effects.effect[s]?i[t](o):s!==t&&i[s]?i[s](o.duration,o.easing,r):i.queue(function(n){e(this)[t](),r&&r.call(i[0]),n()})}})}(jQuery),function(e,t){function n(e,t,n){return[parseFloat(e[0])*(p.test(e[0])?t/100:1),parseFloat(e[1])*(p.test(e[1])?n/100:1)]}function i(t,n){return parseInt(e.css(t,n),10)||0}function o(t){var n=t[0];return 9===n.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(n)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:n.preventDefault?{width:0,height:0,offset:{top:n.pageY,left:n.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.ui=e.ui||{};var r,a=Math.max,s=Math.abs,l=Math.round,u=/left|center|right/,c=/top|center|bottom/,d=/[\+\-]\d+(\.[\d]+)?%?/,f=/^\w+/,p=/%$/,h=e.fn.position;e.position={scrollbarWidth:function(){if(r!==t)return r;var n,i,o=e("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),a=o.children()[0];return e("body").append(o),n=a.offsetWidth,o.css("overflow","scroll"),i=a.offsetWidth,n===i&&(i=o[0].clientWidth),o.remove(),r=n-i},getScrollInfo:function(t){var n=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),i=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),o="scroll"===n||"auto"===n&&t.width<t.element[0].scrollWidth,r="scroll"===i||"auto"===i&&t.height<t.element[0].scrollHeight;return{width:r?e.position.scrollbarWidth():0,height:o?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var n=e(t||window),i=e.isWindow(n[0]),o=!!n[0]&&9===n[0].nodeType;return{element:n,isWindow:i,isDocument:o,offset:n.offset()||{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:i?n.width():n.outerWidth(),height:i?n.height():n.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return h.apply(this,arguments);t=e.extend({},t);var r,p,m,v,g,y,w=e(t.of),x=e.position.getWithinInfo(t.within),b=e.position.getScrollInfo(x),_=(t.collision||"flip").split(" "),C={};return y=o(w),w[0].preventDefault&&(t.at="left top"),p=y.width,m=y.height,v=y.offset,g=e.extend({},v),e.each(["my","at"],function(){var e,n,i=(t[this]||"").split(" ");1===i.length&&(i=u.test(i[0])?i.concat(["center"]):c.test(i[0])?["center"].concat(i):["center","center"]),i[0]=u.test(i[0])?i[0]:"center",i[1]=c.test(i[1])?i[1]:"center",e=d.exec(i[0]),n=d.exec(i[1]),C[this]=[e?e[0]:0,n?n[0]:0],t[this]=[f.exec(i[0])[0],f.exec(i[1])[0]]}),1===_.length&&(_[1]=_[0]),"right"===t.at[0]?g.left+=p:"center"===t.at[0]&&(g.left+=p/2),"bottom"===t.at[1]?g.top+=m:"center"===t.at[1]&&(g.top+=m/2),r=n(C.at,p,m),g.left+=r[0],g.top+=r[1],this.each(function(){var o,u,c=e(this),d=c.outerWidth(),f=c.outerHeight(),h=i(this,"marginLeft"),y=i(this,"marginTop"),T=d+h+i(this,"marginRight")+b.width,E=f+y+i(this,"marginBottom")+b.height,I=e.extend({},g),A=n(C.my,c.outerWidth(),c.outerHeight());"right"===t.my[0]?I.left-=d:"center"===t.my[0]&&(I.left-=d/2),"bottom"===t.my[1]?I.top-=f:"center"===t.my[1]&&(I.top-=f/2),I.left+=A[0],I.top+=A[1],e.support.offsetFractions||(I.left=l(I.left),I.top=l(I.top)),o={marginLeft:h,marginTop:y},e.each(["left","top"],function(n,i){e.ui.position[_[n]]&&e.ui.position[_[n]][i](I,{targetWidth:p,targetHeight:m,elemWidth:d,elemHeight:f,collisionPosition:o,collisionWidth:T,collisionHeight:E,offset:[r[0]+A[0],r[1]+A[1]],my:t.my,at:t.at,within:x,elem:c})}),t.using&&(u=function(e){var n=v.left-I.left,i=n+p-d,o=v.top-I.top,r=o+m-f,l={target:{element:w,left:v.left,top:v.top,width:p,height:m},element:{element:c,left:I.left,top:I.top,width:d,height:f},horizontal:i<0?"left":n>0?"right":"center",vertical:r<0?"top":o>0?"bottom":"middle"};p<d&&s(n+i)<p&&(l.horizontal="center"),m<f&&s(o+r)<m&&(l.vertical="middle"),a(s(n),s(i))>a(s(o),s(r))?l.important="horizontal":l.important="vertical",t.using.call(this,e,l)}),c.offset(e.extend(I,{using:u}))})},e.ui.position={fit:{left:function(e,t){var n,i=t.within,o=i.isWindow?i.scrollLeft:i.offset.left,r=i.width,s=e.left-t.collisionPosition.marginLeft,l=o-s,u=s+t.collisionWidth-r-o;t.collisionWidth>r?l>0&&u<=0?(n=e.left+l+t.collisionWidth-r-o,e.left+=l-n):u>0&&l<=0?e.left=o:l>u?e.left=o+r-t.collisionWidth:e.left=o:l>0?e.left+=l:u>0?e.left-=u:e.left=a(e.left-s,e.left)},top:function(e,t){var n,i=t.within,o=i.isWindow?i.scrollTop:i.offset.top,r=t.within.height,s=e.top-t.collisionPosition.marginTop,l=o-s,u=s+t.collisionHeight-r-o;t.collisionHeight>r?l>0&&u<=0?(n=e.top+l+t.collisionHeight-r-o,e.top+=l-n):u>0&&l<=0?e.top=o:l>u?e.top=o+r-t.collisionHeight:e.top=o:l>0?e.top+=l:u>0?e.top-=u:e.top=a(e.top-s,e.top)}},flip:{left:function(e,t){var n,i,o=t.within,r=o.offset.left+o.scrollLeft,a=o.width,l=o.isWindow?o.scrollLeft:o.offset.left,u=e.left-t.collisionPosition.marginLeft,c=u-l,d=u+t.collisionWidth-a-l,f="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,p="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,h=-2*t.offset[0];c<0?(n=e.left+f+p+h+t.collisionWidth-a-r,(n<0||n<s(c))&&(e.left+=f+p+h)):d>0&&(i=e.left-t.collisionPosition.marginLeft+f+p+h-l,(i>0||s(i)<d)&&(e.left+=f+p+h))},top:function(e,t){var n,i,o=t.within,r=o.offset.top+o.scrollTop,a=o.height,l=o.isWindow?o.scrollTop:o.offset.top,u=e.top-t.collisionPosition.marginTop,c=u-l,d=u+t.collisionHeight-a-l,f="top"===t.my[1],p=f?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,h="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,m=-2*t.offset[1];c<0?(i=e.top+p+h+m+t.collisionHeight-a-r,e.top+p+h+m>c&&(i<0||i<s(c))&&(e.top+=p+h+m)):d>0&&(n=e.top-t.collisionPosition.marginTop+p+h+m-l,e.top+p+h+m>d&&(n>0||s(n)<d)&&(e.top+=p+h+m))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,n,i,o,r,a=document.getElementsByTagName("body")[0],s=document.createElement("div");t=document.createElement(a?"div":"body"),i={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},a&&e.extend(i,{position:"absolute",left:"-1000px",top:"-1000px"});for(r in i)t.style[r]=i[r];t.appendChild(s),n=a||document.documentElement,n.insertBefore(t,n.firstChild),s.style.cssText="position: absolute; left: 10.7432222px;",o=e(s).offset().left,e.support.offsetFractions=o>10&&o<11,t.innerHTML="",n.removeChild(t)}()}(jQuery),function(e){e.widget("ui.autocomplete",{version:"1.10.4",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var t,n,i,o=this.element[0].nodeName.toLowerCase(),r="textarea"===o,a="input"===o;this.isMultiLine=!!r||!a&&this.element.prop("isContentEditable"),this.valueMethod=this.element[r||a?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(o){if(this.element.prop("readOnly"))return t=!0,i=!0,void(n=!0);t=!1,i=!1,n=!1;var r=e.ui.keyCode;switch(o.keyCode){case r.PAGE_UP:t=!0,this._move("previousPage",o);break;case r.PAGE_DOWN:t=!0,this._move("nextPage",o);break;case r.UP:t=!0,this._keyEvent("previous",o);break;case r.DOWN:t=!0,this._keyEvent("next",o);break;case r.ENTER:case r.NUMPAD_ENTER:this.menu.active&&(t=!0,o.preventDefault(),this.menu.select(o));break;case r.TAB:this.menu.active&&this.menu.select(o);break;case r.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(o),o.preventDefault());break;default:n=!0,this._searchTimeout(o)}},keypress:function(i){if(t)return t=!1,void(this.isMultiLine&&!this.menu.element.is(":visible")||i.preventDefault());if(!n){var o=e.ui.keyCode;switch(i.keyCode){case o.PAGE_UP:this._move("previousPage",i);break;case o.PAGE_DOWN:this._move("nextPage",i);break;case o.UP:this._keyEvent("previous",i);break;case o.DOWN:this._keyEvent("next",i)}}},input:function(e){return i?(i=!1,void e.preventDefault()):void this._searchTimeout(e)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){return this.cancelBlur?void delete this.cancelBlur:(clearTimeout(this.searching),this.close(e),void this._change(e))}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().data("ui-menu"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var n=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay(function(){var t=this;this.document.one("mousedown",function(i){i.target===t.element[0]||i.target===n||e.contains(n,i.target)||t.close()})})},menufocus:function(t,n){if(this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)});var i=n.item.data("ui-autocomplete-item");!1!==this._trigger("focus",t,{item:i})?t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(i.value):this.liveRegion.text(i.value)},menuselect:function(e,t){var n=t.item.data("ui-autocomplete-item"),i=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=i,this._delay(function(){this.previous=i,this.selectedItem=n})),!1!==this._trigger("select",e,{item:n})&&this._value(n.value),this.term=this._value(),this.close(e),this.selectedItem=n}}),this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertBefore(this.element),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this._appendTo()),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_initSource:function(){var t,n,i=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(n,i){i(e.ui.autocomplete.filter(t,n.term))}):"string"==typeof this.options.source?(n=this.options.source,this.source=function(t,o){i.xhr&&i.xhr.abort(),i.xhr=e.ajax({url:n,data:t,dataType:"json",success:function(e){o(e)},error:function(){o([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,e))},this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):this._trigger("search",t)!==!1?this._search(e):void 0},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var t=++this.requestIndex;return e.proxy(function(e){t===this.requestIndex&&this.__response(e),this.pending--,this.pending||this.element.removeClass("ui-autocomplete-loading")},this)},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return"string"==typeof t?{label:t,value:t}:e.extend({label:t.label||t.value,value:t.value||t.label},t)})},_suggest:function(t){var n=this.menu.element.empty();this._renderMenu(n,t),this.isNewMenu=!0,this.menu.refresh(),n.show(),this._resizeMenu(),n.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,n){var i=this;e.each(n,function(e,n){i._renderItemData(t,n)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,n){return e("<li>").append(e("<a>").text(n.label)).appendTo(t)},_move:function(e,t){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this._value(this.term),void this.menu.blur()):void this.menu[e](t):void this.search(null,t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){this.isMultiLine&&!this.menu.element.is(":visible")||(this._move(e,t),t.preventDefault())}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,n){var i=new RegExp(e.ui.autocomplete.escapeRegex(n),"i");return e.grep(t,function(e){return i.test(e.label||e.value||e)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var t;this._superApply(arguments),this.options.disabled||this.cancelSearch||(t=e&&e.length?this.options.messages.results(e.length):this.options.messages.noResults,this.liveRegion.text(t))}})}(jQuery),function(e){e.widget("ui.menu",{version:"1.10.4",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,e.proxy(function(e){this.options.disabled&&e.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(e){e.preventDefault()},"click .ui-state-disabled > a":function(e){e.preventDefault()},"click .ui-menu-item:has(a)":function(t){var n=e(t.target).closest(".ui-menu-item");!this.mouseHandled&&n.not(".ui-state-disabled").length&&(this.select(t),t.isPropagationStopped()||(this.mouseHandled=!0),n.has(".ui-menu").length?this.expand(t):!this.element.is(":focus")&&e(this.document[0].activeElement).closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){var n=e(t.currentTarget);n.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(t,n)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var n=this.active||this.element.children(".ui-menu-item").eq(0);t||this.focus(e,n)},blur:function(t){this._delay(function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){e(t.target).closest(".ui-menu").length||this.collapseAll(t),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var t=e(this);t.data("ui-menu-submenu-carat")&&t.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){function n(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var i,o,r,a,s,l=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:l=!1,o=this.previousFilter||"",r=String.fromCharCode(t.keyCode),a=!1,clearTimeout(this.filterTimer),r===o?a=!0:r=o+r,s=new RegExp("^"+n(r),"i"),i=this.activeMenu.children(".ui-menu-item").filter(function(){return s.test(e(this).children("a").text())}),i=a&&i.index(this.active.next())!==-1?this.active.nextAll(".ui-menu-item"):i,i.length||(r=String.fromCharCode(t.keyCode),s=new RegExp("^"+n(r),"i"),i=this.activeMenu.children(".ui-menu-item").filter(function(){return s.test(e(this).children("a").text())})),i.length?(this.focus(t,i),i.length>1?(this.previousFilter=r,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}l&&t.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(e):this.select(e))},refresh:function(){var t,n=this.options.icons.submenu,i=this.element.find(this.options.menus);this.element.toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length),i.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=e(this),i=t.prev("a"),o=e("<span>").addClass("ui-menu-icon ui-icon "+n).data("ui-menu-submenu-carat",!0);i.attr("aria-haspopup","true").prepend(o),t.attr("aria-labelledby",i.attr("id"))}),t=i.add(this.element),t.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),t.children(":not(.ui-menu-item)").each(function(){var t=e(this);/[^\-\u2014\u2013\s]/.test(t.text())||t.addClass("ui-widget-content ui-menu-divider")}),t.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){"icons"===e&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu),this._super(e,t)},focus:function(e,t){var n,i;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),i=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",i.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),n=t.children(".ui-menu"),n.length&&e&&/^mouse/.test(e.type)&&this._startOpening(n),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var n,i,o,r,a,s;this._hasScroll()&&(n=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,i=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,o=t.offset().top-this.activeMenu.offset().top-n-i,r=this.activeMenu.scrollTop(),a=this.activeMenu.height(),s=t.height(),o<0?this.activeMenu.scrollTop(r+o):o+s>a&&this.activeMenu.scrollTop(r+o-a+s))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active}))},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(e)},this.delay))},_open:function(t){var n=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(n)},collapseAll:function(t,n){clearTimeout(this.timer),this.timer=this._delay(function(){var i=n?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));i.length||(i=this.element),this._close(i),this.blur(t),this.activeMenu=i},this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,n){var i;this.active&&(i="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[e+"All"](".ui-menu-item").eq(0)),i&&i.length&&this.active||(i=this.activeMenu.children(".ui-menu-item")[t]()),
this.focus(n,i)},nextPage:function(t){var n,i,o;return this.active?void(this.isLastItem()||(this._hasScroll()?(i=this.active.offset().top,o=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return n=e(this),n.offset().top-i-o<0}),this.focus(t,n)):this.focus(t,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]()))):void this.next(t)},previousPage:function(t){var n,i,o;return this.active?void(this.isFirstItem()||(this._hasScroll()?(i=this.active.offset().top,o=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return n=e(this),n.offset().top-i+o>0}),this.focus(t,n)):this.focus(t,this.activeMenu.children(".ui-menu-item").first()))):void this.next(t)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var n={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,n)}})}(jQuery),function(){function e(e){function t(t,n,i,o,r,a){for(;r>=0&&r<a;r+=e){var s=o?o[r]:r;i=n(i,t[s],s,t)}return i}return function(n,i,o,r){i=w(i,r,4);var a=!I(n)&&y.keys(n),s=(a||n).length,l=e>0?0:s-1;return arguments.length<3&&(o=n[a?a[l]:l],l+=e),t(n,i,o,a,l,s)}}function t(e){return function(t,n,i){n=x(n,i);for(var o=E(t),r=e>0?0:o-1;r>=0&&r<o;r+=e)if(n(t[r],r,t))return r;return-1}}function n(e,t,n){return function(i,o,r){var a=0,s=E(i);if("number"==typeof r)e>0?a=r>=0?r:Math.max(r+s,a):s=r>=0?Math.min(r+1,s):r+s+1;else if(n&&r&&s)return r=n(i,o),i[r]===o?r:-1;if(o!==o)return r=t(c.call(i,a,s),y.isNaN),r>=0?r+a:-1;for(r=e>0?a:s-1;r>=0&&r<s;r+=e)if(i[r]===o)return r;return-1}}function i(e,t){var n=M.length,i=e.constructor,o=y.isFunction(i)&&i.prototype||s,r="constructor";for(y.has(e,r)&&!y.contains(t,r)&&t.push(r);n--;)r=M[n],r in e&&e[r]!==o[r]&&!y.contains(t,r)&&t.push(r)}var o=this,r=o._,a=Array.prototype,s=Object.prototype,l=Function.prototype,u=a.push,c=a.slice,d=s.toString,f=s.hasOwnProperty,p=Array.isArray,h=Object.keys,m=l.bind,v=Object.create,g=function(){},y=function(e){return e instanceof y?e:this instanceof y?void(this._wrapped=e):new y(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=y),exports._=y):o._=y,y.VERSION="1.8.3";var w=function(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,o){return e.call(t,n,i,o)};case 4:return function(n,i,o,r){return e.call(t,n,i,o,r)}}return function(){return e.apply(t,arguments)}},x=function(e,t,n){return null==e?y.identity:y.isFunction(e)?w(e,t,n):y.isObject(e)?y.matcher(e):y.property(e)};y.iteratee=function(e,t){return x(e,t,1/0)};var b=function(e,t){return function(n){var i=arguments.length;if(i<2||null==n)return n;for(var o=1;o<i;o++)for(var r=arguments[o],a=e(r),s=a.length,l=0;l<s;l++){var u=a[l];t&&void 0!==n[u]||(n[u]=r[u])}return n}},_=function(e){if(!y.isObject(e))return{};if(v)return v(e);g.prototype=e;var t=new g;return g.prototype=null,t},C=function(e){return function(t){return null==t?void 0:t[e]}},T=Math.pow(2,53)-1,E=C("length"),I=function(e){var t=E(e);return"number"==typeof t&&t>=0&&t<=T};y.each=y.forEach=function(e,t,n){t=w(t,n);var i,o;if(I(e))for(i=0,o=e.length;i<o;i++)t(e[i],i,e);else{var r=y.keys(e);for(i=0,o=r.length;i<o;i++)t(e[r[i]],r[i],e)}return e},y.map=y.collect=function(e,t,n){t=x(t,n);for(var i=!I(e)&&y.keys(e),o=(i||e).length,r=Array(o),a=0;a<o;a++){var s=i?i[a]:a;r[a]=t(e[s],s,e)}return r},y.reduce=y.foldl=y.inject=e(1),y.reduceRight=y.foldr=e(-1),y.find=y.detect=function(e,t,n){var i;if(i=I(e)?y.findIndex(e,t,n):y.findKey(e,t,n),void 0!==i&&i!==-1)return e[i]},y.filter=y.select=function(e,t,n){var i=[];return t=x(t,n),y.each(e,function(e,n,o){t(e,n,o)&&i.push(e)}),i},y.reject=function(e,t,n){return y.filter(e,y.negate(x(t)),n)},y.every=y.all=function(e,t,n){t=x(t,n);for(var i=!I(e)&&y.keys(e),o=(i||e).length,r=0;r<o;r++){var a=i?i[r]:r;if(!t(e[a],a,e))return!1}return!0},y.some=y.any=function(e,t,n){t=x(t,n);for(var i=!I(e)&&y.keys(e),o=(i||e).length,r=0;r<o;r++){var a=i?i[r]:r;if(t(e[a],a,e))return!0}return!1},y.contains=y.includes=y.include=function(e,t,n,i){return I(e)||(e=y.values(e)),("number"!=typeof n||i)&&(n=0),y.indexOf(e,t,n)>=0},y.invoke=function(e,t){var n=c.call(arguments,2),i=y.isFunction(t);return y.map(e,function(e){var o=i?t:e[t];return null==o?o:o.apply(e,n)})},y.pluck=function(e,t){return y.map(e,y.property(t))},y.where=function(e,t){return y.filter(e,y.matcher(t))},y.findWhere=function(e,t){return y.find(e,y.matcher(t))},y.max=function(e,t,n){var i,o,r=-(1/0),a=-(1/0);if(null==t&&null!=e){e=I(e)?e:y.values(e);for(var s=0,l=e.length;s<l;s++)i=e[s],i>r&&(r=i)}else t=x(t,n),y.each(e,function(e,n,i){o=t(e,n,i),(o>a||o===-(1/0)&&r===-(1/0))&&(r=e,a=o)});return r},y.min=function(e,t,n){var i,o,r=1/0,a=1/0;if(null==t&&null!=e){e=I(e)?e:y.values(e);for(var s=0,l=e.length;s<l;s++)i=e[s],i<r&&(r=i)}else t=x(t,n),y.each(e,function(e,n,i){o=t(e,n,i),(o<a||o===1/0&&r===1/0)&&(r=e,a=o)});return r},y.shuffle=function(e){for(var t,n=I(e)?e:y.values(e),i=n.length,o=Array(i),r=0;r<i;r++)t=y.random(0,r),t!==r&&(o[r]=o[t]),o[t]=n[r];return o},y.sample=function(e,t,n){return null==t||n?(I(e)||(e=y.values(e)),e[y.random(e.length-1)]):y.shuffle(e).slice(0,Math.max(0,t))},y.sortBy=function(e,t,n){return t=x(t,n),y.pluck(y.map(e,function(e,n,i){return{value:e,index:n,criteria:t(e,n,i)}}).sort(function(e,t){var n=e.criteria,i=t.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(n<i||void 0===i)return-1}return e.index-t.index}),"value")};var A=function(e){return function(t,n,i){var o={};return n=x(n,i),y.each(t,function(i,r){var a=n(i,r,t);e(o,i,a)}),o}};y.groupBy=A(function(e,t,n){y.has(e,n)?e[n].push(t):e[n]=[t]}),y.indexBy=A(function(e,t,n){e[n]=t}),y.countBy=A(function(e,t,n){y.has(e,n)?e[n]++:e[n]=1}),y.toArray=function(e){return e?y.isArray(e)?c.call(e):I(e)?y.map(e,y.identity):y.values(e):[]},y.size=function(e){return null==e?0:I(e)?e.length:y.keys(e).length},y.partition=function(e,t,n){t=x(t,n);var i=[],o=[];return y.each(e,function(e,n,r){(t(e,n,r)?i:o).push(e)}),[i,o]},y.first=y.head=y.take=function(e,t,n){if(null!=e)return null==t||n?e[0]:y.initial(e,e.length-t)},y.initial=function(e,t,n){return c.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},y.last=function(e,t,n){if(null!=e)return null==t||n?e[e.length-1]:y.rest(e,Math.max(0,e.length-t))},y.rest=y.tail=y.drop=function(e,t,n){return c.call(e,null==t||n?1:t)},y.compact=function(e){return y.filter(e,y.identity)};var k=function(e,t,n,i){for(var o=[],r=0,a=i||0,s=E(e);a<s;a++){var l=e[a];if(I(l)&&(y.isArray(l)||y.isArguments(l))){t||(l=k(l,t,n));var u=0,c=l.length;for(o.length+=c;u<c;)o[r++]=l[u++]}else n||(o[r++]=l)}return o};y.flatten=function(e,t){return k(e,t,!1)},y.without=function(e){return y.difference(e,c.call(arguments,1))},y.uniq=y.unique=function(e,t,n,i){y.isBoolean(t)||(i=n,n=t,t=!1),null!=n&&(n=x(n,i));for(var o=[],r=[],a=0,s=E(e);a<s;a++){var l=e[a],u=n?n(l,a,e):l;t?(a&&r===u||o.push(l),r=u):n?y.contains(r,u)||(r.push(u),o.push(l)):y.contains(o,l)||o.push(l)}return o},y.union=function(){return y.uniq(k(arguments,!0,!0))},y.intersection=function(e){for(var t=[],n=arguments.length,i=0,o=E(e);i<o;i++){var r=e[i];if(!y.contains(t,r)){for(var a=1;a<n&&y.contains(arguments[a],r);a++);a===n&&t.push(r)}}return t},y.difference=function(e){var t=k(arguments,!0,!0,1);return y.filter(e,function(e){return!y.contains(t,e)})},y.zip=function(){return y.unzip(arguments)},y.unzip=function(e){for(var t=e&&y.max(e,E).length||0,n=Array(t),i=0;i<t;i++)n[i]=y.pluck(e,i);return n},y.object=function(e,t){for(var n={},i=0,o=E(e);i<o;i++)t?n[e[i]]=t[i]:n[e[i][0]]=e[i][1];return n},y.findIndex=t(1),y.findLastIndex=t(-1),y.sortedIndex=function(e,t,n,i){n=x(n,i,1);for(var o=n(t),r=0,a=E(e);r<a;){var s=Math.floor((r+a)/2);n(e[s])<o?r=s+1:a=s}return r},y.indexOf=n(1,y.findIndex,y.sortedIndex),y.lastIndexOf=n(-1,y.findLastIndex),y.range=function(e,t,n){null==t&&(t=e||0,e=0),n=n||1;for(var i=Math.max(Math.ceil((t-e)/n),0),o=Array(i),r=0;r<i;r++,e+=n)o[r]=e;return o};var S=function(e,t,n,i,o){if(!(i instanceof t))return e.apply(n,o);var r=_(e.prototype),a=e.apply(r,o);return y.isObject(a)?a:r};y.bind=function(e,t){if(m&&e.bind===m)return m.apply(e,c.call(arguments,1));if(!y.isFunction(e))throw new TypeError("Bind must be called on a function");var n=c.call(arguments,2),i=function(){return S(e,i,t,this,n.concat(c.call(arguments)))};return i},y.partial=function(e){var t=c.call(arguments,1),n=function(){for(var i=0,o=t.length,r=Array(o),a=0;a<o;a++)r[a]=t[a]===y?arguments[i++]:t[a];for(;i<arguments.length;)r.push(arguments[i++]);return S(e,n,this,this,r)};return n},y.bindAll=function(e){var t,n,i=arguments.length;if(i<=1)throw new Error("bindAll must be passed function names");for(t=1;t<i;t++)n=arguments[t],e[n]=y.bind(e[n],e);return e},y.memoize=function(e,t){var n=function(i){var o=n.cache,r=""+(t?t.apply(this,arguments):i);return y.has(o,r)||(o[r]=e.apply(this,arguments)),o[r]};return n.cache={},n},y.delay=function(e,t){var n=c.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},y.defer=y.partial(y.delay,y,1),y.throttle=function(e,t,n){var i,o,r,a=null,s=0;n||(n={});var l=function(){s=n.leading===!1?0:y.now(),a=null,r=e.apply(i,o),a||(i=o=null)};return function(){var u=y.now();s||n.leading!==!1||(s=u);var c=t-(u-s);return i=this,o=arguments,c<=0||c>t?(a&&(clearTimeout(a),a=null),s=u,r=e.apply(i,o),a||(i=o=null)):a||n.trailing===!1||(a=setTimeout(l,c)),r}},y.debounce=function(e,t,n){var i,o,r,a,s,l=function(){var u=y.now()-a;u<t&&u>=0?i=setTimeout(l,t-u):(i=null,n||(s=e.apply(r,o),i||(r=o=null)))};return function(){r=this,o=arguments,a=y.now();var u=n&&!i;return i||(i=setTimeout(l,t)),u&&(s=e.apply(r,o),r=o=null),s}},y.wrap=function(e,t){return y.partial(t,e)},y.negate=function(e){return function(){return!e.apply(this,arguments)}},y.compose=function(){var e=arguments,t=e.length-1;return function(){for(var n=t,i=e[t].apply(this,arguments);n--;)i=e[n].call(this,i);return i}},y.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},y.before=function(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}},y.once=y.partial(y.before,2);var D=!{toString:null}.propertyIsEnumerable("toString"),M=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];y.keys=function(e){if(!y.isObject(e))return[];if(h)return h(e);var t=[];for(var n in e)y.has(e,n)&&t.push(n);return D&&i(e,t),t},y.allKeys=function(e){if(!y.isObject(e))return[];var t=[];for(var n in e)t.push(n);return D&&i(e,t),t},y.values=function(e){for(var t=y.keys(e),n=t.length,i=Array(n),o=0;o<n;o++)i[o]=e[t[o]];return i},y.mapObject=function(e,t,n){t=x(t,n);for(var i,o=y.keys(e),r=o.length,a={},s=0;s<r;s++)i=o[s],a[i]=t(e[i],i,e);return a},y.pairs=function(e){for(var t=y.keys(e),n=t.length,i=Array(n),o=0;o<n;o++)i[o]=[t[o],e[t[o]]];return i},y.invert=function(e){for(var t={},n=y.keys(e),i=0,o=n.length;i<o;i++)t[e[n[i]]]=n[i];return t},y.functions=y.methods=function(e){var t=[];for(var n in e)y.isFunction(e[n])&&t.push(n);return t.sort()},y.extend=b(y.allKeys),y.extendOwn=y.assign=b(y.keys),y.findKey=function(e,t,n){t=x(t,n);for(var i,o=y.keys(e),r=0,a=o.length;r<a;r++)if(i=o[r],t(e[i],i,e))return i},y.pick=function(e,t,n){var i,o,r={},a=e;if(null==a)return r;y.isFunction(t)?(o=y.allKeys(a),i=w(t,n)):(o=k(arguments,!1,!1,1),i=function(e,t,n){return t in n},a=Object(a));for(var s=0,l=o.length;s<l;s++){var u=o[s],c=a[u];i(c,u,a)&&(r[u]=c)}return r},y.omit=function(e,t,n){if(y.isFunction(t))t=y.negate(t);else{var i=y.map(k(arguments,!1,!1,1),String);t=function(e,t){return!y.contains(i,t)}}return y.pick(e,t,n)},y.defaults=b(y.allKeys,!0),y.create=function(e,t){var n=_(e);return t&&y.extendOwn(n,t),n},y.clone=function(e){return y.isObject(e)?y.isArray(e)?e.slice():y.extend({},e):e},y.tap=function(e,t){return t(e),e},y.isMatch=function(e,t){var n=y.keys(t),i=n.length;if(null==e)return!i;for(var o=Object(e),r=0;r<i;r++){var a=n[r];if(t[a]!==o[a]||!(a in o))return!1}return!0};var O=function(e,t,n,i){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return e===t;e instanceof y&&(e=e._wrapped),t instanceof y&&(t=t._wrapped);var o=d.call(e);if(o!==d.call(t))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t}var r="[object Array]"===o;if(!r){if("object"!=typeof e||"object"!=typeof t)return!1;var a=e.constructor,s=t.constructor;if(a!==s&&!(y.isFunction(a)&&a instanceof a&&y.isFunction(s)&&s instanceof s)&&"constructor"in e&&"constructor"in t)return!1}n=n||[],i=i||[];for(var l=n.length;l--;)if(n[l]===e)return i[l]===t;if(n.push(e),i.push(t),r){if(l=e.length,l!==t.length)return!1;for(;l--;)if(!O(e[l],t[l],n,i))return!1}else{var u,c=y.keys(e);if(l=c.length,y.keys(t).length!==l)return!1;for(;l--;)if(u=c[l],!y.has(t,u)||!O(e[u],t[u],n,i))return!1}return n.pop(),i.pop(),!0};y.isEqual=function(e,t){return O(e,t)},y.isEmpty=function(e){return null==e||(I(e)&&(y.isArray(e)||y.isString(e)||y.isArguments(e))?0===e.length:0===y.keys(e).length)},y.isElement=function(e){return!(!e||1!==e.nodeType)},y.isArray=p||function(e){return"[object Array]"===d.call(e)},y.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},y.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){y["is"+e]=function(t){return d.call(t)==="[object "+e+"]"}}),y.isArguments(arguments)||(y.isArguments=function(e){return y.has(e,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(y.isFunction=function(e){return"function"==typeof e||!1}),y.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},y.isNaN=function(e){return y.isNumber(e)&&e!==+e},y.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"===d.call(e)},y.isNull=function(e){return null===e},y.isUndefined=function(e){return void 0===e},y.has=function(e,t){return null!=e&&f.call(e,t)},y.noConflict=function(){return o._=r,this},y.identity=function(e){return e},y.constant=function(e){return function(){return e}},y.noop=function(){},y.property=C,y.propertyOf=function(e){return null==e?function(){}:function(t){return e[t]}},y.matcher=y.matches=function(e){return e=y.extendOwn({},e),function(t){return y.isMatch(t,e)}},y.times=function(e,t,n){var i=Array(Math.max(0,e));t=w(t,n,1);for(var o=0;o<e;o++)i[o]=t(o);return i},y.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},y.now=Date.now||function(){return(new Date).getTime()};var F={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},P=y.invert(F),N=function(e){var t=function(t){return e[t]},n="(?:"+y.keys(e).join("|")+")",i=RegExp(n),o=RegExp(n,"g");return function(e){return e=null==e?"":""+e,i.test(e)?e.replace(o,t):e}};y.escape=N(F),y.unescape=N(P),y.result=function(e,t,n){var i=null==e?void 0:e[t];return void 0===i&&(i=n),y.isFunction(i)?i.call(e):i};var R=0;y.uniqueId=function(e){var t=++R+"";return e?e+t:t},y.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var L=/(.)^/,W={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},z=/\\|'|\r|\n|\u2028|\u2029/g,H=function(e){return"\\"+W[e]};y.template=function(e,t,n){!t&&n&&(t=n),t=y.defaults({},t,y.templateSettings);var i=RegExp([(t.escape||L).source,(t.interpolate||L).source,(t.evaluate||L).source].join("|")+"|$","g"),o=0,r="__p+='";e.replace(i,function(t,n,i,a,s){return r+=e.slice(o,s).replace(z,H),o=s+t.length,n?r+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":i?r+="'+\n((__t=("+i+"))==null?'':__t)+\n'":a&&(r+="';\n"+a+"\n__p+='"),t}),r+="';\n",t.variable||(r="with(obj||{}){\n"+r+"}\n"),r="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+r+"return __p;\n";try{var a=new Function(t.variable||"obj","_",r)}catch(e){throw e.source=r,e}var s=function(e){return a.call(this,e,y)},l=t.variable||"obj";return s.source="function("+l+"){\n"+r+"}",s},y.chain=function(e){var t=y(e);return t._chain=!0,t};var j=function(e,t){return e._chain?y(t).chain():t};y.mixin=function(e){y.each(y.functions(e),function(t){var n=y[t]=e[t];y.prototype[t]=function(){var e=[this._wrapped];return u.apply(e,arguments),j(this,n.apply(y,e))}})},y.mixin(y),y.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=a[e];y.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0],j(this,n)}}),y.each(["concat","join","slice"],function(e){var t=a[e];y.prototype[e]=function(){return j(this,t.apply(this._wrapped,arguments))}}),y.prototype.value=function(){return this._wrapped},y.prototype.valueOf=y.prototype.toJSON=y.prototype.value,y.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return y})}.call(this),function(e){e.fn.extend({elastic:function(){var t=new Array("paddingTop","paddingRight","paddingBottom","paddingLeft","fontSize","lineHeight","fontFamily","width","fontWeight");return this.each(function(){function n(){s||(s=e("<div />").css({display:"none",position:"absolute"}).appendTo("body"),e.each(t,function(){s.css(this,i.css(this))}));var n=i.val().replace(/<|>/g," ").replace(/\n/g,"<br />").replace(/&/g,"&amp;").replace(/  /g," &nbsp;");s.text()!=n&&(s.html(n),a=s.height()+o>r?s.height()+o:r,Math.abs(a-i.height())>10&&i.animate({height:a},500))}if("textarea"==this.type){var i=e(this),o=2*parseInt(i.css("lineHeight"))||2*parseInt(i.css("fontSize")),r=parseInt(i.css("height"))||o,a=0,s=null;i.css({overflow:"hidden",display:"block"}).bind("focus",function(){self.periodicalUpdater=window.setInterval(function(){n()},400)}).bind("blur",function(){clearInterval(self.periodicalUpdater)}),n()}})}})}(jQuery),function(e,t){var n={BACKSPACE:8,TAB:9,RETURN:13,ESC:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,COMMA:188,SPACE:32,HOME:36,END:35},i={triggerChar:"@",onDataRequest:e.noop,minChars:2,allowRepeat:!1,showAvatars:!0,elastic:!0,defaultValue:"",onCaret:!1,classes:{autoCompleteItemActive:"active"},templates:{wrapper:t.template('<div class="mentions-input-box"></div>'),autocompleteList:t.template('<div class="mentions-autocomplete-list"></div>'),autocompleteListItem:t.template('<li data-ref-id="<%= id %>" data-ref-type="<%= type %>" data-display="<%= display %>"><%= content %></li>'),autocompleteListItemAvatar:t.template('<div class="avatar-container"><img src="<%= avatar %>" /></div>'),autocompleteListItemIcon:t.template('<div class="icon <%= icon %>"></div>'),mentionsOverlay:t.template('<div class="mentions" ><div></div></div>'),mentionItemSyntax:t.template("@[<%= value %>](<%= type %>:<%= id %>)"),mentionItemHighlight:t.template("<strong><span><%= value %></span></strong>")}},o={htmlEncode:function(e){return t.escape(e)},regexpEncode:function(e){return e.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")},highlightTerm:function(e,t){return t||t.length?e.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+t+")(?![^<>]*>)(?![^&;]+;)","gi"),"<b>$1</b>"):e},setCaratPosition:function(e,t){if(e.createTextRange){var n=e.createTextRange();n.move("character",t),n.select()}else e.selectionStart?(e.focus(),e.setSelectionRange(t,t)):e.focus()},rtrim:function(e){return e.replace(/\s+$/,"")}},r=function(r){function a(){D=e(S),"true"!==D.attr("data-mentions-input")&&(M=D.parent(),F=e(r.templates.wrapper()),D.wrapAll(F),F=M.find("> div.mentions-input-box"),D.attr("data-mentions-input","true"),D.bind("keydown",_),D.bind("keypress",b),D.bind("click",y),D.bind("blur",w),navigator.userAgent.indexOf("MSIE 8")>-1?D.bind("propertychange",x):D.bind("input",x),r.elastic&&D.elastic())}function s(){O=e(r.templates.autocompleteList()),O.appendTo(F),O.delegate("li","mousedown",g)}function l(){P=e(r.templates.mentionsOverlay()),P.prependTo(F)}function u(){var e=p();t.each(R,function(t){var n=r.templates.mentionItemSyntax(t);e=e.replace(new RegExp(o.regexpEncode(t.value),"g"),n)});var n=o.htmlEncode(e);t.each(R,function(e){var i=t.extend({},e,{value:o.htmlEncode(e.value)}),a=r.templates.mentionItemSyntax(i),s=r.templates.mentionItemHighlight(i);n=n.replace(new RegExp(o.regexpEncode(a),"g"),s)}),n=n.replace(/\n/g,"<br />"),n=n.replace(/ {2}/g,"&nbsp; "),D.data("messageText",e),D.trigger("updated"),P.find("div").html(n)}function c(){W=[]}function d(){var e=p();R=t.reject(R,function(t){return!t.value||e.indexOf(t.value)==-1}),R=t.compact(R)}function f(e){for(var n,i=p(),a=D[0].selectionStart,s=!1,l=!1,d=new RegExp("\\"+r.triggerChar+z,"gi");n=d.exec(i);)(s===!1||Math.abs(d.lastIndex-a)<s)&&(s=Math.abs(d.lastIndex-a),l=d.lastIndex);var f=l-z.length-1,h=l,m=i.substr(0,f),v=i.substr(h,i.length),g=(m+e.value).length+1;t.find(R,function(t){return t.id==e.id})||R.push(e),c(),z="",C();var y=m+e.value+" "+v;D.val(y),D.trigger("mention"),u(),D.focus(),o.setCaratPosition(D[0],g)}function p(){return e.trim(D.val())}function h(t){var n,i,o,r,a,s,l,u,c,d,f;if((c=t[0])&&e(c).is("textarea")&&null!=c.selectionEnd){for(l={position:"absolute",overflow:"auto",whiteSpace:"pre-wrap",wordWrap:"break-word",boxSizing:"content-box",top:0,left:-9999},u=["boxSizing","fontFamily","fontSize","fontStyle","fontVariant","fontWeight","height","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","textDecoration","textIndent","textTransform","width","word-spacing"],d=0,f=u.length;d<f;d++)a=u[d],l[a]=e(c).css(a);return o=document.createElement("div"),e(o).css(l),e(c).after(o),i=document.createTextNode(c.value.substring(0,c.selectionEnd)),n=document.createTextNode(c.value.substring(c.selectionEnd)),r=document.createElement("span"),r.innerHTML="&nbsp;",o.appendChild(i),o.appendChild(r),o.appendChild(n),o.scrollTop=c.scrollTop,s=e(r).position(),e(o).remove(),s}}function m(t){var n,i,o,r,a,s,l,u,c,d,f;if((c=t[0])&&e(c).is("textarea")&&null!=c.selectionEnd){for(l={position:"absolute",overflow:"auto",whiteSpace:"pre-wrap",wordWrap:"break-word",boxSizing:"content-box",top:0,left:-9999},u=["boxSizing","fontFamily","fontSize","fontStyle","fontVariant","fontWeight","height","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","textDecoration","textIndent","textTransform","width","word-spacing"],d=0,f=u.length;d<f;d++)a=u[d],l[a]=e(c).css(a);return o=document.createElement("div"),e(o).css(l),e(c).after(o),i=document.createTextNode(c.value.substring(0,c.selectionEnd)),n=document.createTextNode(c.value.substring(c.selectionEnd)),r=document.createElement("span"),r.innerHTML="&nbsp;",o.appendChild(i),o.appendChild(r),o.appendChild(n),o.scrollTop=c.scrollTop,s=e(r).offset(),e(o).remove(),s}}function v(){var t=e(D).offset().top,n=e("body").offset().top,i=e(window).scrollTop();i>t&&e(window).scrollTop(t-n)}function g(){var t=e(this),n=L[t.attr("data-uid")];return f(n),v(),!1}function y(){c()}function w(){C()}function x(){u(),d();var e=t.lastIndexOf(W,r.triggerChar);e>-1&&(z=W.slice(e+1).join(""),z=o.rtrim(z),t.defer(t.bind(I,this,z)))}function b(e){if(e.keyCode!==n.BACKSPACE){var t=String.fromCharCode(e.which||e.keyCode);W.push(t)}}function _(i){if(i.keyCode===n.LEFT||i.keyCode===n.RIGHT||i.keyCode===n.HOME||i.keyCode===n.END)return t.defer(c),void(navigator.userAgent.indexOf("MSIE 9")>-1&&t.defer(u));if(i.keyCode===n.BACKSPACE)return void(W=W.slice(0,-1+W.length));if(!O.is(":visible"))return!0;switch(i.keyCode){case n.UP:case n.DOWN:var o=null;return o=i.keyCode===n.DOWN?N&&N.length?N.next():O.find("li").first():e(N).prev(),o.length&&T(o),!1;case n.RETURN:case n.TAB:if(N&&N.length)return N.trigger("mousedown"),!1}return!0}function C(){N=null,O.empty().hide()}function T(e){e.addClass(r.classes.autoCompleteItemActive),e.siblings().removeClass(r.classes.autoCompleteItemActive),N=e}function E(n,i){if(O.show(),!r.allowRepeat){var a=t.pluck(R,"value");i=t.reject(i,function(e){return t.include(a,e.name)})}if(!i.length)return void C();O.empty();var s=e("<ul>").appendTo(O).hide();t.each(i,function(i,a){var l=t.uniqueId("mention_");L[l]=t.extend({},i,{value:i.name});var u=e(r.templates.autocompleteListItem({id:o.htmlEncode(i.id),display:o.htmlEncode(i.name),type:o.htmlEncode(i.type),content:o.highlightTerm(o.htmlEncode(i.display?i.display:i.full_name.length<=1?i.name:i.name+" ("+i.full_name+")"),n)})).attr("data-uid",l);if(0===a&&T(u),r.showAvatars){var c;c=e(i.avatar?r.templates.autocompleteListItemAvatar({avatar:i.avatar}):r.templates.autocompleteListItemIcon({icon:i.icon})),c.prependTo(u)}u=u.appendTo(s)}),O.show(),r.onCaret&&A(O,D),s.show()}function I(e){e&&e.length&&e.length>=r.minChars?r.onDataRequest.call(this,"search",e,function(t){E(e,t)}):C()}function A(e,t){var n=e.css("position");if("absolute"==n){var i=h(t),o=parseInt(t.css("line-height"),10)||18;e.css("width","15em"),e.css("left",i.left),e.css("top",o+i.top);var r=t.offset().left+t.width(),a=e.offset().left+e.width();r<=a&&e.css("left",Math.abs(e.position().left-(a-r)))}else if("fixed"==n){var s=m(t),o=parseInt(t.css("line-height"),10)||18;e.css("width","15em"),e.css("left",s.left+1e4),e.css("top",o+s.top)}}function k(e){R=[];for(var t,n=o.htmlEncode(e),i=new RegExp("("+r.triggerChar+")\\[(.*?)\\]\\((.*?):(.*?)\\)","gi"),a=n;null!=(t=i.exec(n));)a=a.replace(t[0],t[1]+t[2]),R.push({id:t[4],type:t[3],value:t[2],trigger:t[1]});D.val(a),u()}var S,D,M,O,F,P,N,R=[],L={},W=[],z="";return r=e.extend(!0,{},i,r),{init:function(e){S=e,a(),s(),l(),k(r.defaultValue),r.prefillMention&&f(r.prefillMention)},val:function(e){t.isFunction(e)&&e.call(this,R.length?D.data("messageText"):p())},reset:function(){k()},getMentions:function(e){t.isFunction(e)&&e.call(this,R)}}};e.fn.mentionsInput=function(n,i){var o=arguments;return"object"!=typeof n&&n||(i=n),this.each(function(){var a=e.data(this,"mentionsInput")||e.data(this,"mentionsInput",new r(i));return t.isFunction(a[n])?a[n].apply(this,Array.prototype.slice.call(o,1)):"object"!=typeof n&&n?void e.error("Method "+n+" does not exist"):a.init.call(this,this)})}}(jQuery,_),function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.PhotoSwipe=t()}(this,function(){"use strict";var e=function(e,t,n,i){var o={features:null,bind:function(e,t,n,i){var o=(i?"remove":"add")+"EventListener";t=t.split(" ");for(var r=0;r<t.length;r++)t[r]&&e[o](t[r],n,!1)},isArray:function(e){return e instanceof Array},createEl:function(e,t){var n=document.createElement(t||"div");return e&&(n.className=e),n},getScrollY:function(){var e=window.pageYOffset;return void 0!==e?e:document.documentElement.scrollTop},unbind:function(e,t,n){o.bind(e,t,n,!0)},removeClass:function(e,t){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(n," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")},addClass:function(e,t){o.hasClass(e,t)||(e.className+=(e.className?" ":"")+t)},hasClass:function(e,t){return e.className&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(e.className)},getChildByClass:function(e,t){for(var n=e.firstChild;n;){if(o.hasClass(n,t))return n;n=n.nextSibling}},arraySearch:function(e,t,n){for(var i=e.length;i--;)if(e[i][n]===t)return i;return-1},extend:function(e,t,n){for(var i in t)if(t.hasOwnProperty(i)){if(n&&e.hasOwnProperty(i))continue;e[i]=t[i]}},easing:{sine:{out:function(e){return Math.sin(e*(Math.PI/2))},inOut:function(e){return-(Math.cos(Math.PI*e)-1)/2}},cubic:{out:function(e){return--e*e*e+1}}},detectFeatures:function(){if(o.features)return o.features;var e=o.createEl(),t=e.style,n="",i={};if(i.oldIE=document.all&&!document.addEventListener,i.touch="ontouchstart"in window,window.requestAnimationFrame&&(i.raf=window.requestAnimationFrame,i.caf=window.cancelAnimationFrame),i.pointerEvent=navigator.pointerEnabled||navigator.msPointerEnabled,!i.pointerEvent){var r=navigator.userAgent;if(/iP(hone|od)/.test(navigator.platform)){var a=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);a&&a.length>0&&(a=parseInt(a[1],10),a>=1&&a<8&&(i.isOldIOSPhone=!0))}var s=r.match(/Android\s([0-9\.]*)/),l=s?s[1]:0;l=parseFloat(l),l>=1&&(l<4.4&&(i.isOldAndroid=!0),i.androidVersion=l),i.isMobileOpera=/opera mini|opera mobi/i.test(r)}for(var u,c,d=["transform","perspective","animationName"],f=["","webkit","Moz","ms","O"],p=0;p<4;p++){n=f[p];for(var h=0;h<3;h++)u=d[h],c=n+(n?u.charAt(0).toUpperCase()+u.slice(1):u),!i[u]&&c in t&&(i[u]=c);n&&!i.raf&&(n=n.toLowerCase(),i.raf=window[n+"RequestAnimationFrame"],i.raf&&(i.caf=window[n+"CancelAnimationFrame"]||window[n+"CancelRequestAnimationFrame"]))}if(!i.raf){var m=0;i.raf=function(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-m)),i=window.setTimeout(function(){e(t+n)},n);return m=t+n,i},i.caf=function(e){clearTimeout(e)}}return i.svg=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,o.features=i,i}};o.detectFeatures(),o.features.oldIE&&(o.bind=function(e,t,n,i){t=t.split(" ");for(var o,r=(i?"detach":"attach")+"Event",a=function(){n.handleEvent.call(n)},s=0;s<t.length;s++)if(o=t[s])if("object"==typeof n&&n.handleEvent){if(i){if(!n["oldIE"+o])return!1}else n["oldIE"+o]=a;e[r]("on"+o,n["oldIE"+o])}else e[r]("on"+o,n)});var r=this,a=25,s=3,l={allowPanToNext:!0,spacing:.12,bgOpacity:1,mouseUsed:!1,loop:!0,pinchToClose:!0,closeOnScroll:!0,closeOnVerticalDrag:!0,verticalDragRange:.75,hideAnimationDuration:333,showAnimationDuration:333,showHideOpacity:!1,focus:!0,escKey:!0,arrowKeys:!0,mainScrollEndFriction:.35,panEndFriction:.35,isClickableElement:function(e){return"A"===e.tagName},getDoubleTapZoom:function(e,t){return e?1:t.initialZoomLevel<.7?1:1.33},maxSpreadZoom:1.33,modal:!0,scaleMode:"fit"};o.extend(l,i);var u,c,d,f,p,h,m,v,g,y,w,x,b,_,C,T,E,I,A,k,S,D,M,O,F,P,N,R,L,W,z,H,j,U,Z,B,q,K,G,V,Y,$,X,Q,J,ee,te,ne,ie,oe,re,ae,se,le,ue,ce,de=function(){return{x:0,y:0}},fe=de(),pe=de(),he=de(),me={},ve=0,ge={},ye=de(),we=0,xe=!0,be=[],_e={},Ce=!1,Te=function(e,t){o.extend(r,t.publicMethods),be.push(e)},Ee=function(e){var t=Jt();return e>t-1?e-t:e<0?t+e:e},Ie={},Ae=function(e,t){return Ie[e]||(Ie[e]=[]),Ie[e].push(t)},ke=function(e){var t=Ie[e];if(t){var n=Array.prototype.slice.call(arguments);n.shift();for(var i=0;i<t.length;i++)t[i].apply(r,n)}},Se=function(){return(new Date).getTime()},De=function(e){le=e,r.bg.style.opacity=e*l.bgOpacity},Me=function(e,t,n,i,o){(!Ce||o&&o!==r.currItem)&&(i/=o?o.fitRatio:r.currItem.fitRatio),e[D]=x+t+"px, "+n+"px"+b+" scale("+i+")"},Oe=function(e){ie&&(e&&(y>r.currItem.fitRatio?Ce||(fn(r.currItem,!1,!0),Ce=!0):Ce&&(fn(r.currItem),Ce=!1)),Me(ie,he.x,he.y,y))},Fe=function(e){e.container&&Me(e.container.style,e.initialPosition.x,e.initialPosition.y,e.initialZoomLevel,e)},Pe=function(e,t){t[D]=x+e+"px, 0px"+b},Ne=function(e,t){if(!l.loop&&t){var n=f+(ye.x*ve-e)/ye.x,i=Math.round(e-yt.x);(n<0&&i>0||n>=Jt()-1&&i<0)&&(e=yt.x+i*l.mainScrollEndFriction)}yt.x=e,Pe(e,p)},Re=function(e,t){var n=wt[e]-ge[e];return pe[e]+fe[e]+n-n*(t/w)},Le=function(e,t){e.x=t.x,e.y=t.y,t.id&&(e.id=t.id)},We=function(e){e.x=Math.round(e.x),e.y=Math.round(e.y)},ze=null,He=function(){ze&&(o.unbind(document,"mousemove",He),o.addClass(e,"pswp--has_mouse"),l.mouseUsed=!0,ke("mouseUsed")),ze=setTimeout(function(){ze=null},100)},je=function(){o.bind(document,"keydown",r),z.transform&&o.bind(r.scrollWrap,"click",r),l.mouseUsed||o.bind(document,"mousemove",He),o.bind(window,"resize scroll",r),ke("bindEvents")},Ue=function(){o.unbind(window,"resize",r),o.unbind(window,"scroll",g.scroll),o.unbind(document,"keydown",r),o.unbind(document,"mousemove",He),z.transform&&o.unbind(r.scrollWrap,"click",r),K&&o.unbind(window,m,r),ke("unbindEvents")},Ze=function(e,t){var n=ln(r.currItem,me,e);return t&&(ne=n),n},Be=function(e){return e||(e=r.currItem),e.initialZoomLevel},qe=function(e){return e||(e=r.currItem),e.w>0?l.maxSpreadZoom:1},Ke=function(e,t,n,i){return i===r.currItem.initialZoomLevel?(n[e]=r.currItem.initialPosition[e],!0):(n[e]=Re(e,i),n[e]>t.min[e]?(n[e]=t.min[e],!0):n[e]<t.max[e]&&(n[e]=t.max[e],!0))},Ge=function(){if(D){var t=z.perspective&&!O;return x="translate"+(t?"3d(":"("),void(b=z.perspective?", 0px)":")")}D="left",o.addClass(e,"pswp--ie"),Pe=function(e,t){t.left=e+"px"},Fe=function(e){var t=e.fitRatio>1?1:e.fitRatio,n=e.container.style,i=t*e.w,o=t*e.h;n.width=i+"px",n.height=o+"px",n.left=e.initialPosition.x+"px",n.top=e.initialPosition.y+"px"},Oe=function(){if(ie){var e=ie,t=r.currItem,n=t.fitRatio>1?1:t.fitRatio,i=n*t.w,o=n*t.h;e.width=i+"px",e.height=o+"px",e.left=he.x+"px",e.top=he.y+"px"}}},Ve=function(e){var t="";
l.escKey&&27===e.keyCode?t="close":l.arrowKeys&&(37===e.keyCode?t="prev":39===e.keyCode&&(t="next")),t&&(e.ctrlKey||e.altKey||e.shiftKey||e.metaKey||(e.preventDefault?e.preventDefault():e.returnValue=!1,r[t]()))},Ye=function(e){e&&(Y||V||oe||B)&&(e.preventDefault(),e.stopPropagation())},$e=function(){r.setScrollOffset(0,o.getScrollY())},Xe={},Qe=0,Je=function(e){Xe[e]&&(Xe[e].raf&&P(Xe[e].raf),Qe--,delete Xe[e])},et=function(e){Xe[e]&&Je(e),Xe[e]||(Qe++,Xe[e]={})},tt=function(){for(var e in Xe)Xe.hasOwnProperty(e)&&Je(e)},nt=function(e,t,n,i,o,r,a){var s,l=Se();et(e);var u=function(){if(Xe[e]){if(s=Se()-l,s>=i)return Je(e),r(n),void(a&&a());r((n-t)*o(s/i)+t),Xe[e].raf=F(u)}};u()},it={shout:ke,listen:Ae,viewportSize:me,options:l,isMainScrollAnimating:function(){return oe},getZoomLevel:function(){return y},getCurrentIndex:function(){return f},isDragging:function(){return K},isZooming:function(){return J},setScrollOffset:function(e,t){ge.x=e,W=ge.y=t,ke("updateScrollOffset",ge)},applyZoomPan:function(e,t,n,i){he.x=t,he.y=n,y=e,Oe(i)},init:function(){if(!u&&!c){var n;r.framework=o,r.template=e,r.bg=o.getChildByClass(e,"pswp__bg"),N=e.className,u=!0,z=o.detectFeatures(),F=z.raf,P=z.caf,D=z.transform,L=z.oldIE,r.scrollWrap=o.getChildByClass(e,"pswp__scroll-wrap"),r.container=o.getChildByClass(r.scrollWrap,"pswp__container"),p=r.container.style,r.itemHolders=T=[{el:r.container.children[0],wrap:0,index:-1},{el:r.container.children[1],wrap:0,index:-1},{el:r.container.children[2],wrap:0,index:-1}],T[0].el.style.display=T[2].el.style.display="none",Ge(),g={resize:r.updateSize,scroll:$e,keydown:Ve,click:Ye};var i=z.isOldIOSPhone||z.isOldAndroid||z.isMobileOpera;for(z.animationName&&z.transform&&!i||(l.showAnimationDuration=l.hideAnimationDuration=0),n=0;n<be.length;n++)r["init"+be[n]]();if(t){var a=r.ui=new t(r,o);a.init()}ke("firstUpdate"),f=f||l.index||0,(isNaN(f)||f<0||f>=Jt())&&(f=0),r.currItem=Qt(f),(z.isOldIOSPhone||z.isOldAndroid)&&(xe=!1),e.setAttribute("aria-hidden","false"),l.modal&&(xe?e.style.position="fixed":(e.style.position="absolute",e.style.top=o.getScrollY()+"px")),void 0===W&&(ke("initialLayout"),W=R=o.getScrollY());var d="pswp--open ";for(l.mainClass&&(d+=l.mainClass+" "),l.showHideOpacity&&(d+="pswp--animate_opacity "),d+=O?"pswp--touch":"pswp--notouch",d+=z.animationName?" pswp--css_animation":"",d+=z.svg?" pswp--svg":"",o.addClass(e,d),r.updateSize(),h=-1,we=null,n=0;n<s;n++)Pe((n+h)*ye.x,T[n].el.style);L||o.bind(r.scrollWrap,v,r),Ae("initialZoomInEnd",function(){r.setContent(T[0],f-1),r.setContent(T[2],f+1),T[0].el.style.display=T[2].el.style.display="block",l.focus&&e.focus(),je()}),r.setContent(T[1],f),r.updateCurrItem(),ke("afterInit"),xe||(_=setInterval(function(){Qe||K||J||y!==r.currItem.initialZoomLevel||r.updateSize()},1e3)),o.addClass(e,"pswp--visible")}},close:function(){u&&(u=!1,c=!0,ke("close"),Ue(),tn(r.currItem,null,!0,r.destroy))},destroy:function(){ke("destroy"),Vt&&clearTimeout(Vt),e.setAttribute("aria-hidden","true"),e.className=N,_&&clearInterval(_),o.unbind(r.scrollWrap,v,r),o.unbind(window,"scroll",r),Tt(),tt(),Ie=null},panTo:function(e,t,n){n||(e>ne.min.x?e=ne.min.x:e<ne.max.x&&(e=ne.max.x),t>ne.min.y?t=ne.min.y:t<ne.max.y&&(t=ne.max.y)),he.x=e,he.y=t,Oe()},handleEvent:function(e){e=e||window.event,g[e.type]&&g[e.type](e)},goTo:function(e){e=Ee(e);var t=e-f;we=t,f=e,r.currItem=Qt(f),ve-=t,Ne(ye.x*ve),tt(),oe=!1,r.updateCurrItem()},next:function(){r.goTo(f+1)},prev:function(){r.goTo(f-1)},updateCurrZoomItem:function(e){if(e&&ke("beforeChange",0),T[1].el.children.length){var t=T[1].el.children[0];ie=o.hasClass(t,"pswp__zoom-wrap")?t.style:null}else ie=null;ne=r.currItem.bounds,w=y=r.currItem.initialZoomLevel,he.x=ne.center.x,he.y=ne.center.y,e&&ke("afterChange")},invalidateCurrItems:function(){C=!0;for(var e=0;e<s;e++)T[e].item&&(T[e].item.needsUpdate=!0)},updateCurrItem:function(e){if(0!==we){var t,n=Math.abs(we);if(!(e&&n<2)){r.currItem=Qt(f),Ce=!1,ke("beforeChange",we),n>=s&&(h+=we+(we>0?-s:s),n=s);for(var i=0;i<n;i++)we>0?(t=T.shift(),T[s-1]=t,h++,Pe((h+2)*ye.x,t.el.style),r.setContent(t,f-n+i+1+1)):(t=T.pop(),T.unshift(t),h--,Pe(h*ye.x,t.el.style),r.setContent(t,f+n-i-1-1));if(ie&&1===Math.abs(we)){var o=Qt(E);o.initialZoomLevel!==y&&(ln(o,me),fn(o),Fe(o))}we=0,r.updateCurrZoomItem(),E=f,ke("afterChange")}}},updateSize:function(t){if(!xe&&l.modal){var n=o.getScrollY();if(W!==n&&(e.style.top=n+"px",W=n),!t&&_e.x===window.innerWidth&&_e.y===window.innerHeight)return;_e.x=window.innerWidth,_e.y=window.innerHeight,e.style.height=_e.y+"px"}if(me.x=r.scrollWrap.clientWidth,me.y=r.scrollWrap.clientHeight,$e(),ye.x=me.x+Math.round(me.x*l.spacing),ye.y=me.y,Ne(ye.x*ve),ke("beforeResize"),void 0!==h){for(var i,a,u,c=0;c<s;c++)i=T[c],Pe((c+h)*ye.x,i.el.style),u=f+c-1,l.loop&&Jt()>2&&(u=Ee(u)),a=Qt(u),a&&(C||a.needsUpdate||!a.bounds)?(r.cleanSlide(a),r.setContent(i,u),1===c&&(r.currItem=a,r.updateCurrZoomItem(!0)),a.needsUpdate=!1):i.index===-1&&u>=0&&r.setContent(i,u),a&&a.container&&(ln(a,me),fn(a),Fe(a));C=!1}w=y=r.currItem.initialZoomLevel,ne=r.currItem.bounds,ne&&(he.x=ne.center.x,he.y=ne.center.y,Oe(!0)),ke("resize")},zoomTo:function(e,t,n,i,r){t&&(w=y,wt.x=Math.abs(t.x)-he.x,wt.y=Math.abs(t.y)-he.y,Le(pe,he));var a=Ze(e,!1),s={};Ke("x",a,s,e),Ke("y",a,s,e);var l=y,u={x:he.x,y:he.y};We(s);var c=function(t){1===t?(y=e,he.x=s.x,he.y=s.y):(y=(e-l)*t+l,he.x=(s.x-u.x)*t+u.x,he.y=(s.y-u.y)*t+u.y),r&&r(t),Oe(1===t)};n?nt("customZoomTo",0,1,n,i||o.easing.sine.inOut,c):c(1)}},ot=30,rt=10,at={},st={},lt={},ut={},ct={},dt=[],ft={},pt=[],ht={},mt=0,vt=de(),gt=0,yt=de(),wt=de(),xt=de(),bt=function(e,t){return e.x===t.x&&e.y===t.y},_t=function(e,t){return Math.abs(e.x-t.x)<a&&Math.abs(e.y-t.y)<a},Ct=function(e,t){return ht.x=Math.abs(e.x-t.x),ht.y=Math.abs(e.y-t.y),Math.sqrt(ht.x*ht.x+ht.y*ht.y)},Tt=function(){$&&(P($),$=null)},Et=function(){K&&($=F(Et),jt())},It=function(){return!("fit"===l.scaleMode&&y===r.currItem.initialZoomLevel)},At=function(e,t){return!!e&&(!(e.className&&e.className.indexOf("pswp__scroll-wrap")>-1)&&(t(e)?e:At(e.parentNode,t)))},kt={},St=function(e,t){return kt.prevent=!At(e.target,l.isClickableElement),ke("preventDragEvent",e,t,kt),kt.prevent},Dt=function(e,t){return t.x=e.pageX,t.y=e.pageY,t.id=e.identifier,t},Mt=function(e,t,n){n.x=.5*(e.x+t.x),n.y=.5*(e.y+t.y)},Ot=function(e,t,n){if(e-j>50){var i=pt.length>2?pt.shift():{};i.x=t,i.y=n,pt.push(i),j=e}},Ft=function(){var e=he.y-r.currItem.initialPosition.y;return 1-Math.abs(e/(me.y/2))},Pt={},Nt={},Rt=[],Lt=function(e){for(;Rt.length>0;)Rt.pop();return M?(ce=0,dt.forEach(function(e){0===ce?Rt[0]=e:1===ce&&(Rt[1]=e),ce++})):e.type.indexOf("touch")>-1?e.touches&&e.touches.length>0&&(Rt[0]=Dt(e.touches[0],Pt),e.touches.length>1&&(Rt[1]=Dt(e.touches[1],Nt))):(Pt.x=e.pageX,Pt.y=e.pageY,Pt.id="",Rt[0]=Pt),Rt},Wt=function(e,t){var n,i,o,a,s=0,u=he[e]+t[e],c=t[e]>0,d=yt.x+t.x,f=yt.x-ft.x;return n=u>ne.min[e]||u<ne.max[e]?l.panEndFriction:1,u=he[e]+t[e]*n,!l.allowPanToNext&&y!==r.currItem.initialZoomLevel||(ie?"h"!==re||"x"!==e||V||(c?(u>ne.min[e]&&(n=l.panEndFriction,s=ne.min[e]-u,i=ne.min[e]-pe[e]),(i<=0||f<0)&&Jt()>1?(a=d,f<0&&d>ft.x&&(a=ft.x)):ne.min.x!==ne.max.x&&(o=u)):(u<ne.max[e]&&(n=l.panEndFriction,s=u-ne.max[e],i=pe[e]-ne.max[e]),(i<=0||f>0)&&Jt()>1?(a=d,f>0&&d<ft.x&&(a=ft.x)):ne.min.x!==ne.max.x&&(o=u))):a=d,"x"!==e)?void(oe||X||y>r.currItem.fitRatio&&(he[e]+=t[e]*n)):(void 0!==a&&(Ne(a,!0),X=a!==ft.x),ne.min.x!==ne.max.x&&(void 0!==o?he.x=o:X||(he.x+=t.x*n)),void 0!==a)},zt=function(e){if(!("mousedown"===e.type&&e.button>0)){if(Xt)return void e.preventDefault();if(!q||"mousedown"!==e.type){if(St(e,!0)&&e.preventDefault(),ke("pointerDown"),M){var t=o.arraySearch(dt,e.pointerId,"id");t<0&&(t=dt.length),dt[t]={x:e.pageX,y:e.pageY,id:e.pointerId}}var n=Lt(e),i=n.length;Q=null,tt(),K&&1!==i||(K=ae=!0,o.bind(window,m,r),Z=ue=se=B=X=Y=G=V=!1,re=null,ke("firstTouchStart",n),Le(pe,he),fe.x=fe.y=0,Le(ut,n[0]),Le(ct,ut),ft.x=ye.x*ve,pt=[{x:ut.x,y:ut.y}],j=H=Se(),Ze(y,!0),Tt(),Et()),!J&&i>1&&!oe&&!X&&(w=y,V=!1,J=G=!0,fe.y=fe.x=0,Le(pe,he),Le(at,n[0]),Le(st,n[1]),Mt(at,st,xt),wt.x=Math.abs(xt.x)-he.x,wt.y=Math.abs(xt.y)-he.y,ee=te=Ct(at,st))}}},Ht=function(e){if(e.preventDefault(),M){var t=o.arraySearch(dt,e.pointerId,"id");if(t>-1){var n=dt[t];n.x=e.pageX,n.y=e.pageY}}if(K){var i=Lt(e);if(re||Y||J)Q=i;else if(yt.x!==ye.x*ve)re="h";else{var r=Math.abs(i[0].x-ut.x)-Math.abs(i[0].y-ut.y);Math.abs(r)>=rt&&(re=r>0?"h":"v",Q=i)}}},jt=function(){if(Q){var e=Q.length;if(0!==e)if(Le(at,Q[0]),lt.x=at.x-ut.x,lt.y=at.y-ut.y,J&&e>1){if(ut.x=at.x,ut.y=at.y,!lt.x&&!lt.y&&bt(Q[1],st))return;Le(st,Q[1]),V||(V=!0,ke("zoomGestureStarted"));var t=Ct(at,st),n=Kt(t);n>r.currItem.initialZoomLevel+r.currItem.initialZoomLevel/15&&(ue=!0);var i=1,o=Be(),a=qe();if(n<o)if(l.pinchToClose&&!ue&&w<=r.currItem.initialZoomLevel){var s=o-n,u=1-s/(o/1.2);De(u),ke("onPinchClose",u),se=!0}else i=(o-n)/o,i>1&&(i=1),n=o-i*(o/3);else n>a&&(i=(n-a)/(6*o),i>1&&(i=1),n=a+i*o);i<0&&(i=0),ee=t,Mt(at,st,vt),fe.x+=vt.x-xt.x,fe.y+=vt.y-xt.y,Le(xt,vt),he.x=Re("x",n),he.y=Re("y",n),Z=n>y,y=n,Oe()}else{if(!re)return;if(ae&&(ae=!1,Math.abs(lt.x)>=rt&&(lt.x-=Q[0].x-ct.x),Math.abs(lt.y)>=rt&&(lt.y-=Q[0].y-ct.y)),ut.x=at.x,ut.y=at.y,0===lt.x&&0===lt.y)return;if("v"===re&&l.closeOnVerticalDrag&&!It()){fe.y+=lt.y,he.y+=lt.y;var c=Ft();return B=!0,ke("onVerticalDrag",c),De(c),void Oe()}Ot(Se(),at.x,at.y),Y=!0,ne=r.currItem.bounds;var d=Wt("x",lt);d||(Wt("y",lt),We(he),Oe())}}},Ut=function(e){if(z.isOldAndroid){if(q&&"mouseup"===e.type)return;e.type.indexOf("touch")>-1&&(clearTimeout(q),q=setTimeout(function(){q=0},600))}ke("pointerUp"),St(e,!1)&&e.preventDefault();var t;if(M){var n=o.arraySearch(dt,e.pointerId,"id");if(n>-1)if(t=dt.splice(n,1)[0],navigator.pointerEnabled)t.type=e.pointerType||"mouse";else{var i={4:"mouse",2:"touch",3:"pen"};t.type=i[e.pointerType],t.type||(t.type=e.pointerType||"mouse")}}var a,s=Lt(e),u=s.length;if("mouseup"===e.type&&(u=0),2===u)return Q=null,!0;1===u&&Le(ct,s[0]),0!==u||re||oe||(t||("mouseup"===e.type?t={x:e.pageX,y:e.pageY,type:"mouse"}:e.changedTouches&&e.changedTouches[0]&&(t={x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY,type:"touch"})),ke("touchRelease",e,t));var c=-1;if(0===u&&(K=!1,o.unbind(window,m,r),Tt(),J?c=0:gt!==-1&&(c=Se()-gt)),gt=1===u?Se():-1,a=c!==-1&&c<150?"zoom":"swipe",J&&u<2&&(J=!1,1===u&&(a="zoomPointerUp"),ke("zoomGestureEnded")),Q=null,Y||V||oe||B)if(tt(),U||(U=Zt()),U.calculateSwipeSpeed("x"),B){var d=Ft();if(d<l.verticalDragRange)r.close();else{var f=he.y,p=le;nt("verticalDrag",0,1,300,o.easing.cubic.out,function(e){he.y=(r.currItem.initialPosition.y-f)*e+f,De((1-p)*e+p),Oe()}),ke("onVerticalDrag",1)}}else{if((X||oe)&&0===u){var h=qt(a,U);if(h)return;a="zoomPointerUp"}if(!oe)return"swipe"!==a?void Gt():void(!X&&y>r.currItem.fitRatio&&Bt(U))}},Zt=function(){var e,t,n={lastFlickOffset:{},lastFlickDist:{},lastFlickSpeed:{},slowDownRatio:{},slowDownRatioReverse:{},speedDecelerationRatio:{},speedDecelerationRatioAbs:{},distanceOffset:{},backAnimDestination:{},backAnimStarted:{},calculateSwipeSpeed:function(i){pt.length>1?(e=Se()-j+50,t=pt[pt.length-2][i]):(e=Se()-H,t=ct[i]),n.lastFlickOffset[i]=ut[i]-t,n.lastFlickDist[i]=Math.abs(n.lastFlickOffset[i]),n.lastFlickDist[i]>20?n.lastFlickSpeed[i]=n.lastFlickOffset[i]/e:n.lastFlickSpeed[i]=0,Math.abs(n.lastFlickSpeed[i])<.1&&(n.lastFlickSpeed[i]=0),n.slowDownRatio[i]=.95,n.slowDownRatioReverse[i]=1-n.slowDownRatio[i],n.speedDecelerationRatio[i]=1},calculateOverBoundsAnimOffset:function(e,t){n.backAnimStarted[e]||(he[e]>ne.min[e]?n.backAnimDestination[e]=ne.min[e]:he[e]<ne.max[e]&&(n.backAnimDestination[e]=ne.max[e]),void 0!==n.backAnimDestination[e]&&(n.slowDownRatio[e]=.7,n.slowDownRatioReverse[e]=1-n.slowDownRatio[e],n.speedDecelerationRatioAbs[e]<.05&&(n.lastFlickSpeed[e]=0,n.backAnimStarted[e]=!0,nt("bounceZoomPan"+e,he[e],n.backAnimDestination[e],t||300,o.easing.sine.out,function(t){he[e]=t,Oe()}))))},calculateAnimOffset:function(e){n.backAnimStarted[e]||(n.speedDecelerationRatio[e]=n.speedDecelerationRatio[e]*(n.slowDownRatio[e]+n.slowDownRatioReverse[e]-n.slowDownRatioReverse[e]*n.timeDiff/10),n.speedDecelerationRatioAbs[e]=Math.abs(n.lastFlickSpeed[e]*n.speedDecelerationRatio[e]),n.distanceOffset[e]=n.lastFlickSpeed[e]*n.speedDecelerationRatio[e]*n.timeDiff,he[e]+=n.distanceOffset[e])},panAnimLoop:function(){if(Xe.zoomPan&&(Xe.zoomPan.raf=F(n.panAnimLoop),n.now=Se(),n.timeDiff=n.now-n.lastNow,n.lastNow=n.now,n.calculateAnimOffset("x"),n.calculateAnimOffset("y"),Oe(),n.calculateOverBoundsAnimOffset("x"),n.calculateOverBoundsAnimOffset("y"),n.speedDecelerationRatioAbs.x<.05&&n.speedDecelerationRatioAbs.y<.05))return he.x=Math.round(he.x),he.y=Math.round(he.y),Oe(),void Je("zoomPan")}};return n},Bt=function(e){return e.calculateSwipeSpeed("y"),ne=r.currItem.bounds,e.backAnimDestination={},e.backAnimStarted={},Math.abs(e.lastFlickSpeed.x)<=.05&&Math.abs(e.lastFlickSpeed.y)<=.05?(e.speedDecelerationRatioAbs.x=e.speedDecelerationRatioAbs.y=0,e.calculateOverBoundsAnimOffset("x"),e.calculateOverBoundsAnimOffset("y"),!0):(et("zoomPan"),e.lastNow=Se(),void e.panAnimLoop())},qt=function(e,t){var n;oe||(mt=f);var i;if("swipe"===e){var a=ut.x-ct.x,s=t.lastFlickDist.x<10;a>ot&&(s||t.lastFlickOffset.x>20)?i=-1:a<-ot&&(s||t.lastFlickOffset.x<-20)&&(i=1)}var u;i&&(f+=i,f<0?(f=l.loop?Jt()-1:0,u=!0):f>=Jt()&&(f=l.loop?0:Jt()-1,u=!0),u&&!l.loop||(we+=i,ve-=i,n=!0));var c,d=ye.x*ve,p=Math.abs(d-yt.x);return n||d>yt.x==t.lastFlickSpeed.x>0?(c=Math.abs(t.lastFlickSpeed.x)>0?p/Math.abs(t.lastFlickSpeed.x):333,c=Math.min(c,400),c=Math.max(c,250)):c=333,mt===f&&(n=!1),oe=!0,ke("mainScrollAnimStart"),nt("mainScroll",yt.x,d,c,o.easing.cubic.out,Ne,function(){tt(),oe=!1,mt=-1,(n||mt!==f)&&r.updateCurrItem(),ke("mainScrollAnimComplete")}),n&&r.updateCurrItem(!0),n},Kt=function(e){return 1/te*e*w},Gt=function(){var e=y,t=Be(),n=qe();y<t?e=t:y>n&&(e=n);var i,a=1,s=le;return se&&!Z&&!ue&&y<t?(r.close(),!0):(se&&(i=function(e){De((a-s)*e+s)}),r.zoomTo(e,0,200,o.easing.cubic.out,i),!0)};Te("Gestures",{publicMethods:{initGestures:function(){var e=function(e,t,n,i,o){I=e+t,A=e+n,k=e+i,S=o?e+o:""};M=z.pointerEvent,M&&z.touch&&(z.touch=!1),M?navigator.pointerEnabled?e("pointer","down","move","up","cancel"):e("MSPointer","Down","Move","Up","Cancel"):z.touch?(e("touch","start","move","end","cancel"),O=!0):e("mouse","down","move","up"),m=A+" "+k+" "+S,v=I,M&&!O&&(O=navigator.maxTouchPoints>1||navigator.msMaxTouchPoints>1),r.likelyTouchDevice=O,g[I]=zt,g[A]=Ht,g[k]=Ut,S&&(g[S]=g[k]),z.touch&&(v+=" mousedown",m+=" mousemove mouseup",g.mousedown=g[I],g.mousemove=g[A],g.mouseup=g[k]),O||(l.allowPanToNext=!1)}}});var Vt,Yt,$t,Xt,Qt,Jt,en,tn=function(t,n,i,a){Vt&&clearTimeout(Vt),Xt=!0,$t=!0;var s;t.initialLayout?(s=t.initialLayout,t.initialLayout=null):s=l.getThumbBoundsFn&&l.getThumbBoundsFn(f);var u=i?l.hideAnimationDuration:l.showAnimationDuration,c=function(){Je("initialZoom"),i?(r.template.removeAttribute("style"),r.bg.removeAttribute("style")):(De(1),n&&(n.style.display="block"),o.addClass(e,"pswp--animated-in"),ke("initialZoom"+(i?"OutEnd":"InEnd"))),a&&a(),Xt=!1};if(!u||!s||void 0===s.x)return ke("initialZoom"+(i?"Out":"In")),y=t.initialZoomLevel,Le(he,t.initialPosition),Oe(),e.style.opacity=i?0:1,De(1),void(u?setTimeout(function(){c()},u):c());var p=function(){var n=d,a=!r.currItem.src||r.currItem.loadError||l.showHideOpacity;t.miniImg&&(t.miniImg.style.webkitBackfaceVisibility="hidden"),i||(y=s.w/t.w,he.x=s.x,he.y=s.y-R,r[a?"template":"bg"].style.opacity=.001,Oe()),et("initialZoom"),i&&!n&&o.removeClass(e,"pswp--animated-in"),a&&(i?o[(n?"remove":"add")+"Class"](e,"pswp--animate_opacity"):setTimeout(function(){o.addClass(e,"pswp--animate_opacity")},30)),Vt=setTimeout(function(){if(ke("initialZoom"+(i?"Out":"In")),i){var r=s.w/t.w,l={x:he.x,y:he.y},d=y,f=le,p=function(t){1===t?(y=r,he.x=s.x,he.y=s.y-W):(y=(r-d)*t+d,he.x=(s.x-l.x)*t+l.x,he.y=(s.y-W-l.y)*t+l.y),Oe(),a?e.style.opacity=1-t:De(f-t*f)};n?nt("initialZoom",0,1,u,o.easing.cubic.out,p,c):(p(1),Vt=setTimeout(c,u+20))}else y=t.initialZoomLevel,Le(he,t.initialPosition),Oe(),De(1),a?e.style.opacity=1:De(1),Vt=setTimeout(c,u+20)},i?25:90)};p()},nn={},on=[],rn={index:0,errorMsg:'<div class="pswp__error-msg"><a href="%url%" target="_blank">The image</a> could not be loaded.</div>',forceProgressiveLoading:!1,preload:[1,1],getNumItemsFn:function(){return Yt.length}},an=function(){return{center:{x:0,y:0},max:{x:0,y:0},min:{x:0,y:0}}},sn=function(e,t,n){var i=e.bounds;i.center.x=Math.round((nn.x-t)/2),i.center.y=Math.round((nn.y-n)/2)+e.vGap.top,i.max.x=t>nn.x?Math.round(nn.x-t):i.center.x,i.max.y=n>nn.y?Math.round(nn.y-n)+e.vGap.top:i.center.y,i.min.x=t>nn.x?0:i.center.x,i.min.y=n>nn.y?e.vGap.top:i.center.y},ln=function(e,t,n){if(e.src&&!e.loadError){var i=!n;if(i&&(e.vGap||(e.vGap={top:0,bottom:0}),ke("parseVerticalMargin",e)),nn.x=t.x,nn.y=t.y-e.vGap.top-e.vGap.bottom,i){var o=nn.x/e.w,r=nn.y/e.h;e.fitRatio=o<r?o:r;var a=l.scaleMode;"orig"===a?n=1:"fit"===a&&(n=e.fitRatio),n>1&&(n=1),e.initialZoomLevel=n,e.bounds||(e.bounds=an())}if(!n)return;return sn(e,e.w*n,e.h*n),i&&n===e.initialZoomLevel&&(e.initialPosition=e.bounds.center),e.bounds}return e.w=e.h=0,e.initialZoomLevel=e.fitRatio=1,e.bounds=an(),e.initialPosition=e.bounds.center,e.bounds},un=function(e,t,n,i,o,a){t.loadError||i&&(t.imageAppended=!0,fn(t,i,t===r.currItem&&Ce),n.appendChild(i),a&&setTimeout(function(){t&&t.loaded&&t.placeholder&&(t.placeholder.style.display="none",t.placeholder=null)},500))},cn=function(e){e.loading=!0,e.loaded=!1;var t=e.img=o.createEl("pswp__img","img"),n=function(){e.loading=!1,e.loaded=!0,e.loadComplete?e.loadComplete(e):e.img=null,t.onload=t.onerror=null,t=null};return t.onload=n,t.onerror=function(){e.loadError=!0,n()},t.src=e.src,t},dn=function(e,t){if(e.src&&e.loadError&&e.container)return t&&(e.container.innerHTML=""),e.container.innerHTML=l.errorMsg.replace("%url%",e.src),!0},fn=function(e,t,n){if(e.src){t||(t=e.container.lastChild);var i=n?e.w:Math.round(e.w*e.fitRatio),o=n?e.h:Math.round(e.h*e.fitRatio);e.placeholder&&!e.loaded&&(e.placeholder.style.width=i+"px",e.placeholder.style.height=o+"px"),t.style.width=i+"px",t.style.height=o+"px"}},pn=function(){if(on.length){for(var e,t=0;t<on.length;t++)e=on[t],e.holder.index===e.index&&un(e.index,e.item,e.baseDiv,e.img,!1,e.clearPlaceholder);on=[]}};Te("Controller",{publicMethods:{lazyLoadItem:function(e){e=Ee(e);var t=Qt(e);t&&(!t.loaded&&!t.loading||C)&&(ke("gettingData",e,t),t.src&&cn(t))},initController:function(){o.extend(l,rn,!0),r.items=Yt=n,Qt=r.getItemAt,Jt=l.getNumItemsFn,en=l.loop,Jt()<3&&(l.loop=!1),Ae("beforeChange",function(e){var t,n=l.preload,i=null===e||e>=0,o=Math.min(n[0],Jt()),a=Math.min(n[1],Jt());for(t=1;t<=(i?a:o);t++)r.lazyLoadItem(f+t);for(t=1;t<=(i?o:a);t++)r.lazyLoadItem(f-t)}),Ae("initialLayout",function(){r.currItem.initialLayout=l.getThumbBoundsFn&&l.getThumbBoundsFn(f)}),Ae("mainScrollAnimComplete",pn),Ae("initialZoomInEnd",pn),Ae("destroy",function(){for(var e,t=0;t<Yt.length;t++)e=Yt[t],e.container&&(e.container=null),e.placeholder&&(e.placeholder=null),e.img&&(e.img=null),e.preloader&&(e.preloader=null),e.loadError&&(e.loaded=e.loadError=!1);on=null})},getItemAt:function(e){return e>=0&&(void 0!==Yt[e]&&Yt[e])},allowProgressiveImg:function(){return l.forceProgressiveLoading||!O||l.mouseUsed||screen.width>1200},setContent:function(e,t){l.loop&&(t=Ee(t));var n=r.getItemAt(e.index);n&&(n.container=null);var i,a=r.getItemAt(t);if(!a)return void(e.el.innerHTML="");ke("gettingData",t,a),e.index=t,e.item=a;var s=a.container=o.createEl("pswp__zoom-wrap");if(!a.src&&a.html&&(a.html.tagName?s.appendChild(a.html):s.innerHTML=a.html),dn(a),ln(a,me),!a.src||a.loadError||a.loaded)a.src&&!a.loadError&&(i=o.createEl("pswp__img","img"),i.style.opacity=1,i.src=a.src,fn(a,i),un(t,a,s,i,!0));else{if(a.loadComplete=function(n){if(u){if(e&&e.index===t){if(dn(n,!0))return n.loadComplete=n.img=null,ln(n,me),Fe(n),void(e.index===f&&r.updateCurrZoomItem());n.imageAppended?!Xt&&n.placeholder&&(n.placeholder.style.display="none",n.placeholder=null):z.transform&&(oe||Xt)?on.push({item:n,baseDiv:s,img:n.img,index:t,holder:e,clearPlaceholder:!0}):un(t,n,s,n.img,oe||Xt,!0)}n.loadComplete=null,n.img=null,ke("imageLoadComplete",t,n)}},o.features.transform){var c="pswp__img pswp__img--placeholder";c+=a.msrc?"":" pswp__img--placeholder--blank";var d=o.createEl(c,a.msrc?"img":"");a.msrc&&(d.src=a.msrc),fn(a,d),s.appendChild(d),a.placeholder=d}a.loading||cn(a),r.allowProgressiveImg()&&(!$t&&z.transform?on.push({item:a,baseDiv:s,img:a.img,index:t,holder:e}):un(t,a,s,a.img,!0,!0))}$t||t!==f?Fe(a):(ie=s.style,tn(a,i||a.img)),e.el.innerHTML="",e.el.appendChild(s)},cleanSlide:function(e){e.img&&(e.img.onload=e.img.onerror=null),e.loaded=e.loading=e.img=e.imageAppended=!1}}});var hn,mn={},vn=function(e,t,n){var i=document.createEvent("CustomEvent"),o={origEvent:e,target:e.target,releasePoint:t,pointerType:n||"touch"};i.initCustomEvent("pswpTap",!0,!0,o),e.target.dispatchEvent(i)};Te("Tap",{publicMethods:{initTap:function(){Ae("firstTouchStart",r.onTapStart),Ae("touchRelease",r.onTapRelease),Ae("destroy",function(){mn={},hn=null})},onTapStart:function(e){e.length>1&&(clearTimeout(hn),hn=null)},onTapRelease:function(e,t){if(t&&!Y&&!G&&!Qe){var n=t;if(hn&&(clearTimeout(hn),hn=null,_t(n,mn)))return void ke("doubleTap",n);if("mouse"===t.type)return void vn(e,t,"mouse");var i=e.target.tagName.toUpperCase();if("BUTTON"===i||o.hasClass(e.target,"pswp__single-tap"))return void vn(e,t);Le(mn,n),hn=setTimeout(function(){vn(e,t),hn=null},300)}}}});var gn;Te("DesktopZoom",{publicMethods:{initDesktopZoom:function(){L||(O?Ae("mouseUsed",function(){r.setupDesktopZoom()}):r.setupDesktopZoom(!0))},setupDesktopZoom:function(t){gn={};var n="wheel mousewheel DOMMouseScroll";Ae("bindEvents",function(){o.bind(e,n,r.handleMouseWheel)}),Ae("unbindEvents",function(){gn&&o.unbind(e,n,r.handleMouseWheel)}),r.mouseZoomedIn=!1;var i,a=function(){r.mouseZoomedIn&&(o.removeClass(e,"pswp--zoomed-in"),r.mouseZoomedIn=!1),y<1?o.addClass(e,"pswp--zoom-allowed"):o.removeClass(e,"pswp--zoom-allowed"),s()},s=function(){i&&(o.removeClass(e,"pswp--dragging"),i=!1)};Ae("resize",a),Ae("afterChange",a),Ae("pointerDown",function(){r.mouseZoomedIn&&(i=!0,o.addClass(e,"pswp--dragging"))}),Ae("pointerUp",s),t||a()},handleMouseWheel:function(e){if(y<=r.currItem.fitRatio)return l.modal&&(!l.closeOnScroll||Qe||K?e.preventDefault():D&&Math.abs(e.deltaY)>2&&(d=!0,r.close())),!0;if(e.stopPropagation(),gn.x=0,"deltaX"in e)1===e.deltaMode?(gn.x=18*e.deltaX,gn.y=18*e.deltaY):(gn.x=e.deltaX,gn.y=e.deltaY);else if("wheelDelta"in e)e.wheelDeltaX&&(gn.x=-.16*e.wheelDeltaX),e.wheelDeltaY?gn.y=-.16*e.wheelDeltaY:gn.y=-.16*e.wheelDelta;else{if(!("detail"in e))return;gn.y=e.detail}Ze(y,!0);var t=he.x-gn.x,n=he.y-gn.y;(l.modal||t<=ne.min.x&&t>=ne.max.x&&n<=ne.min.y&&n>=ne.max.y)&&e.preventDefault(),r.panTo(t,n)},toggleDesktopZoom:function(t){t=t||{x:me.x/2+ge.x,y:me.y/2+ge.y};var n=l.getDoubleTapZoom(!0,r.currItem),i=y===n;r.mouseZoomedIn=!i,r.zoomTo(i?r.currItem.initialZoomLevel:n,t,333),o[(i?"remove":"add")+"Class"](e,"pswp--zoomed-in")}}});var yn,wn,xn,bn,_n,Cn,Tn,En,In,An,kn,Sn,Dn={history:!0,galleryUID:1},Mn=function(){return kn.hash.substring(1)},On=function(){yn&&clearTimeout(yn),xn&&clearTimeout(xn)},Fn=function(){var e=Mn(),t={};if(e.length<5)return t;var n,i=e.split("&");for(n=0;n<i.length;n++)if(i[n]){var o=i[n].split("=");o.length<2||(t[o[0]]=o[1])}if(l.galleryPIDs){var r=t.pid;for(t.pid=0,n=0;n<Yt.length;n++)if(Yt[n].pid===r){t.pid=n;break}}else t.pid=parseInt(t.pid,10)-1;return t.pid<0&&(t.pid=0),t},Pn=function(){if(xn&&clearTimeout(xn),Qe||K)return void(xn=setTimeout(Pn,500));bn?clearTimeout(wn):bn=!0;var e=f+1,t=Qt(f);t.hasOwnProperty("pid")&&(e=t.pid);var n=Tn+"&gid="+l.galleryUID+"&pid="+e;En||kn.hash.indexOf(n)===-1&&(An=!0);var i=kn.href.split("#")[0]+"#"+n;Sn?"#"+n!==window.location.hash&&history[En?"replaceState":"pushState"]("",document.title,i):En?kn.replace(i):kn.hash=n,En=!0,wn=setTimeout(function(){bn=!1},60)};Te("History",{publicMethods:{initHistory:function(){if(o.extend(l,Dn,!0),l.history){kn=window.location,An=!1,In=!1,En=!1,Tn=Mn(),Sn="pushState"in history,Tn.indexOf("gid=")>-1&&(Tn=Tn.split("&gid=")[0],Tn=Tn.split("?gid=")[0]),Ae("afterChange",r.updateURL),Ae("unbindEvents",function(){o.unbind(window,"hashchange",r.onHashChange)});var e=function(){Cn=!0,In||(An?history.pushState("",document.title,kn.pathname+kn.search):Tn?kn.hash=Tn:Sn?history.pushState("",document.title,kn.pathname+kn.search):kn.hash=""),On()};Ae("unbindEvents",function(){d&&e()}),Ae("destroy",function(){Cn||e()}),Ae("firstUpdate",function(){f=Fn().pid});var t=Tn.indexOf("pid=");t>-1&&(Tn=Tn.substring(0,t),"&"===Tn.slice(-1)&&(Tn=Tn.slice(0,-1))),setTimeout(function(){u&&o.bind(window,"hashchange",r.onHashChange)},40)}},onHashChange:function(){return Mn()===Tn?(In=!0,void r.close()):void(bn||(_n=!0,r.goTo(Fn().pid),_n=!1))},updateURL:function(){On(),_n||(En?yn=setTimeout(Pn,800):Pn())}}}),o.extend(r,it)};return e}),!function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.PhotoSwipeUI_Default=t()}(this,function(){"use strict";var e=function(e,t){var n,i,o,r,a,s,l,u,c,d,f,p,h,m,v,g,y,w,x,b=this,_=!1,C=!0,T=!0,E={barsSize:{top:44,bottom:"auto"},closeElClasses:["item","caption","zoom-wrap","ui","top-bar"],timeToIdle:4e3,timeToIdleOutside:1e3,loadingIndicatorDelay:1e3,addCaptionHTMLFn:function(e,t){return e.title?(t.children[0].innerHTML=e.title,!0):(t.children[0].innerHTML="",!1)},closeEl:!0,captionEl:!0,fullscreenEl:!0,zoomEl:!0,shareEl:!0,counterEl:!0,arrowEl:!0,preloaderEl:!0,tapToClose:!1,tapToToggleControls:!0,clickToCloseNonZoomable:!0,shareButtons:[{id:"facebook",label:"Share on Facebook",url:"https://www.facebook.com/sharer/sharer.php?u={{url}}"},{id:"twitter",label:"Tweet",url:"https://twitter.com/intent/tweet?text={{text}}&url={{url}}"},{id:"pinterest",label:"Pin it",url:"http://www.pinterest.com/pin/create/button/?url={{url}}&media={{image_url}}&description={{text}}"},{id:"download",label:"Download image",url:"{{raw_image_url}}",download:!0}],getImageURLForShare:function(){return e.currItem.src||""},getPageURLForShare:function(){return window.location.href},getTextForShare:function(){return e.currItem.title||""},indexIndicatorSep:" / "},I=function(e){if(g)return!0;e=e||window.event,v.timeToIdle&&v.mouseUsed&&!c&&R();for(var n,i,o=e.target||e.srcElement,r=o.className,a=0;a<B.length;a++)n=B[a],n.onTap&&r.indexOf("pswp__"+n.name)>-1&&(n.onTap(),i=!0);if(i){e.stopPropagation&&e.stopPropagation(),g=!0;var s=t.features.isOldAndroid?600:30;y=setTimeout(function(){g=!1},s)}},A=function(){return!e.likelyTouchDevice||v.mouseUsed||screen.width>1200},k=function(e,n,i){t[(i?"add":"remove")+"Class"](e,"pswp__"+n)},S=function(){var e=1===v.getNumItemsFn();e!==m&&(k(i,"ui--one-slide",e),m=e)},D=function(){k(l,"share-modal--hidden",T)},M=function(){return T=!T,T?(t.removeClass(l,"pswp__share-modal--fade-in"),setTimeout(function(){T&&D()},300)):(D(),setTimeout(function(){T||t.addClass(l,"pswp__share-modal--fade-in")},30)),T||F(),!1},O=function(t){t=t||window.event;var n=t.target||t.srcElement;return e.shout("shareLinkClick",t,n),!!n.href&&(!!n.hasAttribute("download")||(window.open(n.href,"pswp_share","scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=550,height=420,top=100,left="+(window.screen?Math.round(screen.width/2-275):100)),T||M(),!1))},F=function(){for(var e,t,n,i,o,r="",a=0;a<v.shareButtons.length;a++)e=v.shareButtons[a],n=v.getImageURLForShare(e),i=v.getPageURLForShare(e),o=v.getTextForShare(e),t=e.url.replace("{{url}}",encodeURIComponent(i)).replace("{{image_url}}",encodeURIComponent(n)).replace("{{raw_image_url}}",n).replace("{{text}}",encodeURIComponent(o)),r+='<a href="'+t+'" target="_blank" class="pswp__share--'+e.id+'"'+(e.download?"download":"")+">"+e.label+"</a>",v.parseShareButtonOut&&(r=v.parseShareButtonOut(e,r));l.children[0].innerHTML=r,l.children[0].onclick=O},P=function(e){for(var n=0;n<v.closeElClasses.length;n++)if(t.hasClass(e,"pswp__"+v.closeElClasses[n]))return!0},N=0,R=function(){clearTimeout(x),N=0,c&&b.setIdle(!1)},L=function(e){e=e?e:window.event;var t=e.relatedTarget||e.toElement;t&&"HTML"!==t.nodeName||(clearTimeout(x),x=setTimeout(function(){b.setIdle(!0)},v.timeToIdleOutside))},W=function(){v.fullscreenEl&&!t.features.isOldAndroid&&(n||(n=b.getFullscreenAPI()),n?(t.bind(document,n.eventK,b.updateFullscreen),b.updateFullscreen(),t.addClass(e.template,"pswp--supports-fs")):t.removeClass(e.template,"pswp--supports-fs"))},z=function(){v.preloaderEl&&(H(!0),d("beforeChange",function(){clearTimeout(h),h=setTimeout(function(){e.currItem&&e.currItem.loading?(!e.allowProgressiveImg()||e.currItem.img&&!e.currItem.img.naturalWidth)&&H(!1):H(!0)},v.loadingIndicatorDelay)}),d("imageLoadComplete",function(t,n){e.currItem===n&&H(!0)}))},H=function(e){p!==e&&(k(f,"preloader--active",!e),p=e)},j=function(e){var n=e.vGap;if(A()){var a=v.barsSize;if(v.captionEl&&"auto"===a.bottom)if(r||(r=t.createEl("pswp__caption pswp__caption--fake"),r.appendChild(t.createEl("pswp__caption__center")),i.insertBefore(r,o),t.addClass(i,"pswp__ui--fit")),v.addCaptionHTMLFn(e,r,!0)){var s=r.clientHeight;n.bottom=parseInt(s,10)||44}else n.bottom=a.top;else n.bottom="auto"===a.bottom?0:a.bottom;n.top=a.top}else n.top=n.bottom=0},U=function(){v.timeToIdle&&d("mouseUsed",function(){t.bind(document,"mousemove",R),t.bind(document,"mouseout",L),w=setInterval(function(){N++,2===N&&b.setIdle(!0)},v.timeToIdle/2)})},Z=function(){d("onVerticalDrag",function(e){C&&.95>e?b.hideControls():!C&&e>=.95&&b.showControls()});var e;d("onPinchClose",function(t){C&&.9>t?(b.hideControls(),e=!0):e&&!C&&t>.9&&b.showControls()}),d("zoomGestureEnded",function(){e=!1,e&&!C&&b.showControls()})},B=[{name:"caption",option:"captionEl",onInit:function(e){o=e}},{name:"share-modal",option:"shareEl",onInit:function(e){l=e},onTap:function(){M()}},{name:"button--share",option:"shareEl",onInit:function(e){s=e},onTap:function(){M()}},{name:"button--zoom",option:"zoomEl",onTap:e.toggleDesktopZoom},{name:"counter",option:"counterEl",onInit:function(e){a=e}},{name:"button--close",option:"closeEl",onTap:e.close},{name:"button--arrow--left",option:"arrowEl",onTap:e.prev},{name:"button--arrow--right",option:"arrowEl",onTap:e.next},{name:"button--fs",option:"fullscreenEl",onTap:function(){n.isFullscreen()?n.exit():n.enter()}},{name:"preloader",option:"preloaderEl",onInit:function(e){f=e}}],q=function(){var e,n,o,r=function(i){if(i)for(var r=i.length,a=0;r>a;a++){e=i[a],n=e.className;for(var s=0;s<B.length;s++)o=B[s],n.indexOf("pswp__"+o.name)>-1&&(v[o.option]?(t.removeClass(e,"pswp__element--disabled"),o.onInit&&o.onInit(e)):t.addClass(e,"pswp__element--disabled"))}};r(i.children);var a=t.getChildByClass(i,"pswp__top-bar");a&&r(a.children)};b.init=function(){t.extend(e.options,E,!0),v=e.options,i=t.getChildByClass(e.scrollWrap,"pswp__ui"),d=e.listen,Z(),d("beforeChange",b.update),d("doubleTap",function(t){var n=e.currItem.initialZoomLevel;e.getZoomLevel()!==n?e.zoomTo(n,t,333):e.zoomTo(v.getDoubleTapZoom(!1,e.currItem),t,333)}),d("preventDragEvent",function(e,t,n){var i=e.target||e.srcElement;i&&i.className&&e.type.indexOf("mouse")>-1&&(i.className.indexOf("__caption")>0||/(SMALL|STRONG|EM)/i.test(i.tagName))&&(n.prevent=!1)}),d("bindEvents",function(){t.bind(i,"pswpTap click",I),t.bind(e.scrollWrap,"pswpTap",b.onGlobalTap),e.likelyTouchDevice||t.bind(e.scrollWrap,"mouseover",b.onMouseOver)}),d("unbindEvents",function(){T||M(),w&&clearInterval(w),t.unbind(document,"mouseout",L),t.unbind(document,"mousemove",R),t.unbind(i,"pswpTap click",I),t.unbind(e.scrollWrap,"pswpTap",b.onGlobalTap),t.unbind(e.scrollWrap,"mouseover",b.onMouseOver),n&&(t.unbind(document,n.eventK,b.updateFullscreen),n.isFullscreen()&&(v.hideAnimationDuration=0,n.exit()),n=null)}),d("destroy",function(){v.captionEl&&(r&&i.removeChild(r),t.removeClass(o,"pswp__caption--empty")),l&&(l.children[0].onclick=null),t.removeClass(i,"pswp__ui--over-close"),t.addClass(i,"pswp__ui--hidden"),b.setIdle(!1)}),v.showAnimationDuration||t.removeClass(i,"pswp__ui--hidden"),d("initialZoomIn",function(){v.showAnimationDuration&&t.removeClass(i,"pswp__ui--hidden")}),d("initialZoomOut",function(){t.addClass(i,"pswp__ui--hidden")}),d("parseVerticalMargin",j),q(),v.shareEl&&s&&l&&(T=!0),S(),U(),W(),z()},b.setIdle=function(e){c=e,k(i,"ui--idle",e)},b.update=function(){C&&e.currItem?(b.updateIndexIndicator(),v.captionEl&&(v.addCaptionHTMLFn(e.currItem,o),k(o,"caption--empty",!e.currItem.title)),_=!0):_=!1,T||M(),S()},b.updateFullscreen=function(i){i&&setTimeout(function(){
e.setScrollOffset(0,t.getScrollY())},50),t[(n.isFullscreen()?"add":"remove")+"Class"](e.template,"pswp--fs")},b.updateIndexIndicator=function(){v.counterEl&&(a.innerHTML=e.getCurrentIndex()+1+v.indexIndicatorSep+v.getNumItemsFn())},b.onGlobalTap=function(n){n=n||window.event;var i=n.target||n.srcElement;if(!g)if(n.detail&&"mouse"===n.detail.pointerType){if(P(i))return void e.close();t.hasClass(i,"pswp__img")&&(1===e.getZoomLevel()&&e.getZoomLevel()<=e.currItem.fitRatio?v.clickToCloseNonZoomable&&e.close():e.toggleDesktopZoom(n.detail.releasePoint))}else if(v.tapToToggleControls&&(C?b.hideControls():b.showControls()),v.tapToClose&&(t.hasClass(i,"pswp__img")||P(i)))return void e.close()},b.onMouseOver=function(e){e=e||window.event;var t=e.target||e.srcElement;k(i,"ui--over-close",P(t))},b.hideControls=function(){t.addClass(i,"pswp__ui--hidden"),C=!1},b.showControls=function(){C=!0,_||b.update(),t.removeClass(i,"pswp__ui--hidden")},b.supportsFullscreen=function(){var e=document;return!!(e.exitFullscreen||e.mozCancelFullScreen||e.webkitExitFullscreen||e.msExitFullscreen)},b.getFullscreenAPI=function(){var t,n=document.documentElement,i="fullscreenchange";return n.requestFullscreen?t={enterK:"requestFullscreen",exitK:"exitFullscreen",elementK:"fullscreenElement",eventK:i}:n.mozRequestFullScreen?t={enterK:"mozRequestFullScreen",exitK:"mozCancelFullScreen",elementK:"mozFullScreenElement",eventK:"moz"+i}:n.webkitRequestFullscreen?t={enterK:"webkitRequestFullscreen",exitK:"webkitExitFullscreen",elementK:"webkitFullscreenElement",eventK:"webkit"+i}:n.msRequestFullscreen&&(t={enterK:"msRequestFullscreen",exitK:"msExitFullscreen",elementK:"msFullscreenElement",eventK:"MSFullscreenChange"}),t&&(t.enter=function(){return u=v.closeOnScroll,v.closeOnScroll=!1,"webkitRequestFullscreen"!==this.enterK?e.template[this.enterK]():void e.template[this.enterK](Element.ALLOW_KEYBOARD_INPUT)},t.exit=function(){return v.closeOnScroll=u,document[this.exitK]()},t.isFullscreen=function(){return document[this.elementK]}),t}};return e});